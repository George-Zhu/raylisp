%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: paper.dvi
%%Pages: 12
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold Times-Italic
%%DocumentPaperSizes: Letter
%%EndComments
%DVIPSCommandLine: dvips paper.dvi -o paper.ps
%DVIPSParameters: dpi=406, comments removed
%DVIPSSource:  TeX output 1999.02.19:1141
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginFont: Times-Roman
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def
%%EndFont
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale true def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 406 406 (paper.dvi)
@start /Fa 206[17 49[{ TeXBase1Encoding ReEncodeFont }1
33.833336 /Times-Roman rf /Fb 206[20 49[{
 TeXBase1Encoding ReEncodeFont }1 39.472221 /Times-Roman
rf /Fc 2 50 df<00060000000600000006000000060000000600000006000000060000
000600000006000000060000000600000006000000060000FFFFFFF0FFFFFFF000060000
000600000006000000060000000600000006000000060000000600000006000000060000
0006000000060000000600001C1C7E9722>43 D<03000700FF00FF000700070007000700
070007000700070007000700070007000700070007000700070007000700FFF8FFF80D19
7C9816>49 D E /Fd 5 94 df<0000700000000070000000007000000000700000000070
000000007000000000700000000070000000007000000000700000000070000000007000
0000007000000000700000000070000000007000000000700000FFFFFFFFF8FFFFFFFFF8
FFFFFFFFF800007000000000700000000070000000007000000000700000000070000000
007000000000700000000070000000007000000000700000000070000000007000000000
70000000007000000000700000000070000025257DA02C>43 D<00600000E00003E0003F
E000FDE000C1E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001
E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001
E00001E00001E00001E00001E00001E00001E00003F000FFFFC0FFFFC012257BA41C>49
D<01F80007FF001C0F801807C03003E06001F06001F0F801F8FC01F8FC00F8FC00F8FC00
F87801F80001F80001F00001F00003E00003C00007C0000780000F00001E00001C000038
0000700000E00001C0000180000300180600180C00181800383000303FFFF07FFFF0FFFF
F0FFFFF015257DA41C>I<FF80FF80FF80E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000FF80FF80FF8009387BA910>91 D<FF80FF80FF8003800380038003
800380038003800380038003800380038003800380038003800380038003800380038003
800380038003800380038003800380038003800380038003800380038003800380038003
800380038003800380038003800380038003800380FF80FF80FF8009387FA910>93
D E /Fe 2 116 df<0007F00007E00000E00000E00000E00001C00001C00001C00001C0
00038001F380070B800E0F801C0700380700780700780700F00E00F00E00F00E00F00E00
E01C60E01C60E03C60707C4030CCC01F0780141B7D9A17>100 D<01F8060E0C0E081E18
1E1C0C1FC00FF007FC00FC001C700CF00CF00CE01860701FC00F117D9015>115
D E /Ff 5 101 df<78FCFCFEFE7A020202020404080810204007117B8510>59
D<00000003800000000F800000003F80000000FE00000001F800000007E00000001F8000
00007F00000001FC00000007F00000001FC00000007F00000000FC00000003F00000000F
C00000003F80000000FE00000000F800000000FE000000003F800000000FC000000003F0
00000000FC000000007F000000001FC000000007F000000001FC000000007F000000001F
8000000007E000000001F800000000FE000000003F800000000F80000000038021237B9F
2C>I<007FFFFF0000007FFFFFE0000003E003F0000003E000F8000007C0007C000007C0
003E000007C0001F000007C0001F00000F80000F80000F80000F80000F80000F80000F80
000F80001F00000F80001F00000F80001F00000F80001F00000F80003E00001F80003E00
001F80003E00001F80003E00001F80007C00001F00007C00003F00007C00003F00007C00
003E0000F800007E0000F800007C0000F80000FC0000F80000F80001F00001F00001F000
01E00001F00003E00001F00007C00003E0000F800003E0003E000003E0007C000007E003
F00000FFFFFFC00000FFFFFE00000029267DA52F>68 D<007FFF80007FFF800003E00000
03E0000007C0000007C0000007C0000007C000000F8000000F8000000F8000000F800000
1F0000001F0000001F0000001F0000003E0000003E0000003E0000003E0000007C000000
7C0000007C0000007C000000F8000000F8000000F8000000F8000001F0000001F0000001
F0000001F0000003E0000003E0000003E0000007E00000FFFF0000FFFF000019267EA519
>73 D<000003E000003FC000003FC0000003C0000003C000000780000007800000078000
00078000000F0000000F0000000F0000000F0000001E0000001E00003E1E0000E19E0003
C0FC0007807C000F007C001E007C001E0078003C0078007C0078007C007800F800F000F8
00F000F800F000F800F000F001E000F001E180F001E180F001E180F003C300F007C30070
05C3003819C6001C30C40007C078001B277EA61D>100 D E /Fg
134[25 1[37 25 28 16 22 22 1[28 28 28 41 16 2[16 28 28
16 25 28 25 28 28 9[47 34 41 31 28 34 1[34 1[37 1[31
2[19 41 41 1[34 1[37 1[34 8[28 28 28 1[28 28 1[28 1[16
14 4[19 19 19 36[28 2[{ TeXBase1Encoding ReEncodeFont }48
56.388893 /Times-Italic rf /Fh 134[28 1[41 28 31 19 22
25 1[31 28 31 1[16 31 1[16 31 1[19 25 31 25 31 28 12[37
31 41 3[41 4[22 44 5[37 41 20[14 2[19 19 40[{
 TeXBase1Encoding ReEncodeFont }31 56.388893 /Times-Bold
rf /Fi 134[34 34 49 34 37 22 26 30 1[37 34 37 56 19 37
22 19 37 34 22 30 37 30 37 34 7[49 1[67 2[45 37 49 1[41
52 49 64 3[26 1[52 41 45 49 49 45 12[34 34 34 34 34 2[17
43[37 2[{ TeXBase1Encoding ReEncodeFont }47 67.666672
/Times-Bold rf /Fj 4 50 df<FFFFFFFF80FFFFFFFF80FFFFFFFF8021037B8F2C>0
D<01FC0007FF000FFF801FFFC03FFFE07FFFF07FFFF0FFFFF8FFFFF8FFFFF8FFFFF8FFFF
F8FFFFF8FFFFF87FFFF07FFFF03FFFE01FFFC00FFF8007FF0001FC0015157D981C>15
D<000000001C0000000000001C0000000000001C0000000000000E0000000000000E0000
000000000E00000000000007000000000000078000000000000380000000000001C00000
00000001E0000000000000F00000000000007C007FFFFFFFFFFE00FFFFFFFFFFFF807FFF
FFFFFFFE0000000000007C000000000000F0000000000001E0000000000001C000000000
000380000000000007800000000000070000000000000E0000000000000E000000000000
0E0000000000001C0000000000001C0000000000001C0000311D7D9C38>33
D<00FC00001FC00003FF80007FF0000FFFE001E018001C07F003800C003001F806000600
2000FC0C00020060007E1800010040003F38000100C0001FF000018080000FE000008080
000FE0000080800007E0000080800003F0000080800003F8000080800003F8000080C000
07FC00018040000E7E00010040000C3F0003002000181F8002003000300FC006001800E0
07F01C000C03C003FFF80007FF0000FFE00001FC00001F800031187D9738>49
D E /Fk 138[22 12 17 2[22 4[22 1[12 22 1[15 20 22 20
22 20 7[32 1[42 1[32 27 25 30 2[32 32 40 27 32 17 15
32 2[27 32 30 30 32 41 2[25 7[22 1[22 22 3[11 15 45[{
 TeXBase1Encoding ReEncodeFont }39 45.111111 /Times-Roman
rf /Fl 1 4 df<0200020002008208E23872701FC007001FC07270E23882080200020002
000D0F7C8F16>3 D E /Fm 105[28 1[25 25 24[25 28 28 41
28 28 16 22 19 28 28 28 28 44 16 28 16 16 28 28 19 25
28 25 28 25 3[19 1[19 1[41 1[53 41 41 34 31 37 1[31 41
41 50 34 41 22 19 41 41 31 34 41 37 37 41 3[32 2[16 28
28 28 28 28 28 28 28 28 28 16 14 19 14 32 1[19 19 19
1[47 3[19 29[31 31 2[{ TeXBase1Encoding ReEncodeFont }78
56.388893 /Times-Roman rf /Fn 133[36 2[58 40 45 27 31
36 1[45 40 45 67 22 45 1[22 45 40 27 36 45 36 1[40 10[58
3[58 1[49 63 5[31 63 4[58 54 58 9[40 40 40 40 40 40 40
49[{ TeXBase1Encoding ReEncodeFont }37 81.199966 /Times-Bold
rf /Fo 133[22 25 1[37 25 25 14 20 17 1[25 25 25 39 14
25 1[14 25 25 17 22 25 22 25 22 12[31 1[34 11[28 4[37
18[13 1[13 41[28 2[{ TeXBase1Encoding ReEncodeFont }30
50.750000 /Times-Roman rf /Fp 139[17 20 22 14[22 28 25
31[37 65[{ TeXBase1Encoding ReEncodeFont }7 50.750000
/Times-Bold rf /Fq 1 4 df<01C00001C00001C00001C000E1C380F18780F88F803EBE
0007F00001C00007F0003EBE00F88F80F18780E1C38001C00001C00001C00001C0001113
7D9418>3 D E /Fr 134[34 2[34 34 19 26 22 2[34 34 52 3[19
34 1[22 30 2[34 30 11[49 1[37 12[37 3[45 8[34 7[34 4[17
44[{ TeXBase1Encoding ReEncodeFont }22 67.666672 /Times-Roman
rf /Fs 134[49 3[49 1[38 32 2[49 49 4[27 1[49 32 43 1[43
1[43 12[59 1[65 8[32 3[59 66[54 2[{ TeXBase1Encoding ReEncodeFont }17
97.439995 /Times-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 406dpi
TeXDict begin
%%PaperSize: Letter

%%EndSetup
%%Page: 1 1
1 0 bop 669 590 a Fs(Ef)n(\002cienc)o(y)23 b(Issues)h(for)g(Ray)g(T)m
(racing)1157 753 y Fr(Brian)17 b(Smits)1477 728 y Fq(\003)1066
831 y Fr(Uni)n(v)o(ersity)f(of)h(Utah)1069 963 y(February)h(19,)e(1999)
1223 1221 y Fp(Abstract)565 1314 y Fo(Ray)g(casting)h(is)f(the)h
(bottleneck)i(of)d(man)o(y)i(rendering)g(algorithms.)27
b(Although)17 b(much)489 1376 y(w)o(ork)g(has)g(been)i(done)f(on)f
(making)i(ray)e(casting)h(more)g(ef)o(\002cient,)h(most)e(published)i
(w)o(ork)489 1438 y(is)c(high)h(le)o(v)o(el.)25 b(This)15
b(paper)h(discusses)g(ef)o(\002cienc)o(y)i(at)d(a)h(slightly)g(lo)o
(wer)f(le)o(v)o(el,)i(presenting)489 1499 y(optimizations)d(for)d
(bounding)j(v)o(olume)f(hierarchies)g(that)f(man)o(y)i(people)f(use)f
(b)o(ut)g(are)g(rarely)489 1561 y(described)k(in)f(the)g(literature.)22
b(A)13 b(set)i(of)f(guidelines)j(for)d(optimization)j(are)e(presented)h
(that)489 1623 y(a)o(v)o(oid)i(some)g(of)f(the)h(common)h(pitf)o(alls.)
30 b(Finally)m(,)18 b(the)g(ef)o(fects)g(of)f(the)h(optimizations)h
(are)489 1685 y(sho)o(wn)12 b(for)h(a)g(set)g(of)f(models.)348
1874 y Fn(1)82 b(Intr)o(oduction)348 2000 y Fm(Man)o(y)16
b(realistic)d(rendering)i(systems)f(rely)h(on)h(ray)f(casting)g
(algorithms)e(for)i(some)g(part)g(of)g(their)348 2067
y(computation.)24 b(Often,)16 b(the)g(ray)g(casting)g(tak)o(es)g(most)g
(of)g(the)g(time)f(in)h(the)h(system,)f(and)g(signi\002-)348
2135 y(cant)e(ef)o(fort)f(is)g(usually)h(spent)g(on)g(making)g(it)g
(more)f(ef)o(\002cient.)k(Much)d(w)o(ork)g(has)h(been)f(done)g(and)348
2202 y(published)j(on)g(acceleration)e(strate)o(gies)g(and)i(ef)o
(\002cient)e(algorithms)g(for)i(ray)f(casting,)h(the)f(main)348
2270 y(ideas)g(of)f(which)h(are)f(summarized)g(in)g(Glassner)g([5].)22
b(In)16 b(addition,)g(man)o(y)g(people)f(ha)o(v)o(e)h(de)o(v)o(el-)348
2337 y(oped)c(optimizations)d(for)i(making)g(these)g(algorithms)f(e)o
(v)o(en)h(f)o(aster)m(.)16 b(Much)11 b(of)h(this)e(w)o(ork)i(remains)
348 2404 y(unpublished)17 b(and)g(part)f(of)h(oral)f(history)l(.)26
b(This)16 b(paper)h(is)f(an)h(attempt)f(to)g(write)g(do)o(wn)g(some)h
(of)348 2472 y(these)g(techniques)g(and)h(some)f(higher)g(le)o(v)o(el)g
(guidelines)f(to)i(follo)o(w)d(when)j(trying)e(to)i(speed)f(up)348
2539 y(ray)h(casting)g(algorithms.)28 b(I)18 b(learned)f(most)h(of)g
(the)f(lessons)h(in)g(here)g(the)g(hard)g(w)o(ay)l(,)h(either)e(by)348
2607 y(making)e(the)g(mistak)o(es)f(myself,)g(or)h(by)h(tracking)e
(them)h(do)o(wn)f(in)h(other)g(systems.)k(Man)o(y)d(of)f(the)348
2674 y(observ)o(ations)e(in)h(here)f(were)h(con\002rmed)f(by)i(others.)
433 2741 y(This)j(paper)g(will)f(discuss)h(some)g(mid-le)o(v)o(el)e
(optimization)h(issues)g(for)h(bounding)h(v)o(olume)348
2809 y(hierarchies.)31 b(The)19 b(ray)f(casting)h(algorithm)e(uses)h
(the)h(hierarchy)f(to)g(determine)g(if)g(the)g(ray)h(in-)348
2876 y(tersects)c(an)g(object.)22 b(An)16 b(intersection)e(in)n(v)o
(olv)o(es)h(computing)g(the)g(distance)g(to)h(the)f(intersection)348
2944 y(and)g(the)e(intersection)g(point)g(as)h(well)f(as)h(which)g
(object)f(w)o(as)h(hit.)j(Sometimes)c(it)h(includes)f(com-)348
3011 y(puting)18 b(surf)o(ace)f(normal)g(and)i(te)o(xture)e
(coordinates.)28 b(The)18 b(information)e(computed)i(during)f(an)348
3078 y(intersection)h(is)h(sometimes)f(called)h(the)g(hit)h
(information.)32 b(In)20 b(ray)f(tracing)g(based)g(renderers,)348
3146 y(rays)f(from)f(the)g(e)o(ye)h(are)f(called)g(primary)g(rays.)28
b(Re\003ected)18 b(and)g(transmitted)d(rays)j(are)f(kno)o(wn)348
3213 y(as)f(secondary)f(rays.)22 b(T)l(ogether)n(,)15
b(these)h(rays)f(are)g(called)g(intersection)f(rays.)22
b(Rays)16 b(from)f(hits)g(to)348 3281 y(lights)e(to)h(determine)f
(shado)o(wing)g(are)g(called)h(shado)o(w)f(rays.)p 348
3329 776 3 v 405 3365 a Fl(\003)429 3381 y Fk(bes@cs.utah.edu)1303
3556 y Fm(1)p eop
%%Page: 2 2
2 1 bop 348 354 a Fn(2)82 b(Principles)22 b(of)f(Optimization)348
479 y Fm(Optimization)9 b(can)j(be)f(a)h(seducti)o(v)o(e)e(acti)o(vity)
g(leading)h(to)g(endless)g(tweaks)f(and)i(changes)f(of)g(code.)348
547 y(The)17 b(most)f(important)f(part)h(of)g(optimization)e(is)i(kno)o
(wing)g(when)g(not)h(to)f(do)g(it.)24 b(T)l(w)o(o)17
b(common)348 614 y(cases)d(are:)433 726 y Fj(\017)28
b Fm(Code)14 b(or)g(system)f(is)h(not)g(run)g(frequently)l(.)433
837 y Fj(\017)28 b Fm(Code)14 b(is)g(a)g(small)f(fraction)f(of)i(o)o(v)
o(erall)g(time.)348 949 y(In)k(other)g(w)o(ords,)h(code)g(should)f
(only)g(be)g(optimized)f(if)h(it)g(will)e(mak)o(e)j(a)f(signi\002cant)g
(ef)o(fect)e(on)348 1016 y(the)22 b(\002nal)g(system)g(and)g(the)g
(\002nal)g(system)g(will)e(be)j(used)f(frequently)f(enough)i(to)f
(justify)f(the)348 1084 y(programmer')m(s)13 b(time)f(and)j(the)e
(chance)h(of)g(breaking)g(something.)433 1151 y(It)i(helps)g(to)h(ha)o
(v)o(e)g(a)g(set)f(of)h(principles)e(to)i(follo)o(w)e(in)i(order)f(to)h
(guide)g(the)f(process)h(of)f(opti-)348 1218 y(mization.)g(The)f(set)e
(I)h(use)g(is:)433 1330 y Fj(\017)28 b Fm(Mak)o(e)14
b(it)f(w)o(ork)h(before)g(you)g(mak)o(e)g(it)g(f)o(ast.)433
1442 y Fj(\017)28 b Fm(Pro\002le)14 b(e)o(v)o(erything)f(you)h(do.)433
1553 y Fj(\017)28 b Fm(Comple)o(xity)13 b(is)h(bad.)433
1665 y Fj(\017)28 b Fm(Preprocessing)13 b(is)g(good.)433
1777 y Fj(\017)28 b Fm(Compute)14 b(only)g(what)f(you)h(need.)348
1938 y Fi(2.1)67 b(Mak)o(e)17 b(it)g(W)-5 b(ork)17 b(Bef)n(or)o(e)g(Y)
-7 b(ou)16 b(Mak)o(e)h(it)g(F)n(ast)348 2043 y Fm(Code)e(should)g(be)f
(made)g(correct)g(before)g(it)f(is)h(made)g(f)o(ast)g([2].)19
b(As)13 b(stated)h(repeatedly)f(by)i(Knuth)348 2110 y([9])k
(\223Premature)f(optimization)f(is)i(the)f(root)h(of)g(all)f(e)o
(vil\224.)32 b(Ob)o(viously)l(,)20 b(slo)o(w)e(correct)g(code)h(is)348
2178 y(more)d(useful)f(than)h(f)o(ast)g(brok)o(en)g(code.)24
b(There)16 b(is)g(an)g(additional)f(reason)h(for)f(the)h(rule,)g
(though.)348 2245 y(If)j(you)g(create)f(a)h(w)o(orking,)g(unoptimized)f
(v)o(ersion)h(\002rst,)g(you)g(can)g(use)g(that)f(as)h(a)g(benchmark)
348 2313 y(to)c(check)g(your)g(optimizations)e(against.)19
b(This)c(is)g(v)o(ery)g(important.)k(Putting)14 b(the)h(optimizations)
348 2380 y(in)i(early)f(means)h(you)g(can)h(ne)o(v)o(er)e(be)h
(completely)f(sure)h(if)f(the)o(y)h(are)g(actually)f(speeding)h(up)g
(the)348 2447 y(code.)h(Y)-6 b(ou)13 b(don')o(t)g(w)o(ant)h(to)f
(\002nd)h(out)g(months)f(or)h(years)f(later)g(that)g(your)g(code)h
(could)g(be)g(sped)f(up)348 2515 y(by)i(remo)o(ving)e(all)g(those)h
(cle)o(v)o(er)f(optimizations.)348 2675 y Fi(2.2)67 b(Pr)o(o\002le)17
b(Ev)o(erything)g(Y)-7 b(ou)16 b(Do)348 2781 y Fm(It)j(is)g(important)f
(to)h(\002nd)h(out)f(what)g(the)g(bottleneck)f(is)h(before)g(trying)g
(to)g(remo)o(v)o(e)g(it.)33 b(This)19 b(is)348 2848 y(best)13
b(done)f(by)h(pro\002ling)g(the)f(code)h(before)f(making)g(changes)h
([3)o(].)k(The)c(best)f(pro\002lers)g(gi)o(v)o(e)h(time)348
2916 y(per)k(line)e(of)i(code)f(as)g(well)g(as)g(per)g(function.)24
b(The)o(y)17 b(also)f(tell)f(you)i(ho)o(w)f(man)o(y)g(times)f(dif)o
(ferent)348 2983 y(routines)i(are)g(called.)28 b(T)l(ypically)16
b(what)h(this)g(will)f(tell)g(you)i(is)g(that)e(most)h(of)h(the)f(time)
g(is)g(spent)348 3050 y(intersecting)f(bounding)h(box)o(es,)h
(something)e(that)h(seems)f(to)h(be)g(uni)o(v)o(ersally)e(true.)26
b(It)17 b(also)f(can)348 3118 y(tell)d(you)h(ho)o(w)g(man)o(y)g
(bounding)g(box)o(es)g(and)h(primiti)o(v)o(es)c(are)j(check)o(ed.)433
3185 y(Lik)o(e)f(man)o(y)f(algorithms,)g(the)g(speed)h(will)e(v)o(ary)h
(based)h(on)g(the)f(input.)17 b(Ob)o(viously)12 b(lar)o(ge)g(data)348
3253 y(sets)h(tend)h(to)f(tak)o(e)g(more)g(time)g(than)g(small)g(ones,)
g(b)o(ut)h(the)f(structure)f(of)h(the)h(models)f(you)g(use)h(for)348
3320 y(benchmarking)g(is)g(also)g(important.)j(Ideally)d(you)g(use)h(a)
f(set)g(of)g(models)g(that)g(are)g(characteristic)348
3388 y(of)g(the)g(types)f(of)h(models)g(you)g(e)o(xpect)g(to)g(use.)
1303 3556 y(2)p eop
%%Page: 3 3
3 2 bop 433 354 a Fm(Pro\002ling)18 b(is)g(especially)f(critical)g(for)
h(lo)o(w-le)o(v)o(el)f(optimizations.)29 b(Intuition)17
b(is)h(often)g(v)o(ery)348 421 y(wrong)c(about)g(what)f(changes)h(will)
e(mak)o(e)i(the)g(code)g(f)o(aster)f(and)h(which)f(ones)h(the)g
(compiler)f(w)o(as)348 489 y(already)18 b(doing)g(for)g(you.)30
b(Compilers)17 b(are)h(good)g(at)g(rearranging)f(nearby)h
(instructions.)28 b(The)o(y)348 556 y(are)17 b(bad)h(at)f(kno)o(wing)f
(that)h(the)g(v)o(alue)f(you)i(are)f(continually)f(reading)h(through)g
(three)g(le)o(v)o(els)f(of)348 624 y(indirection)h(is)g(constant.)29
b(K)o(eeping)18 b(things)f(clean)h(and)g(local)f(mak)o(es)h(a)h(big)f
(dif)o(ference.)28 b(This)348 691 y(paper)14 b(mak)o(es)g(almost)f(no)h
(attempt)f(to)h(deal)f(with)g(this)g(le)o(v)o(el)g(of)h(optimization.)
348 852 y Fi(2.3)67 b(Complexity)16 b(is)h(Bad)348 957
y Fm(Comple)o(xity)i(in)g(the)g(intersection)e(algorithm)h(causes)h
(problems)f(in)h(man)o(y)g(w)o(ays.)33 b(The)20 b(more)348
1025 y(comple)o(x)15 b(your)f(code)h(becomes,)f(the)g(more)g(lik)o(ely)
g(it)g(is)g(to)g(beha)o(v)o(e)h(une)o(xpectedly)f(on)h(ne)o(w)f(data)
348 1092 y(sets.)22 b(Additionally)l(,)14 b(comple)o(xity)h(usually)g
(means)g(branching,)h(which)f(is)g(signi\002cantly)f(slo)o(wer)348
1159 y(than)20 b(similar)e(code)i(with)f(fe)o(w)f(branches.)35
b(If)19 b(you)h(are)g(checking)g(the)f(state)g(of)h(something)f(in)348
1227 y(order)f(to)g(get)f(out)h(of)g(doing)g(w)o(ork,)h(it)e(is)h
(important)e(that)i(the)f(amount)h(of)g(w)o(ork)g(is)f(signi\002cant)
348 1294 y(and)c(that)f(you)h(actually)f(get)g(out)h(of)f(doing)h(the)f
(w)o(ork)h(often)f(enough)h(to)g(justify)e(the)i(checks.)k(This)348
1362 y(is)d(the)g(ar)o(gument)f(against)g(the)g(caches)h(used)g(in)g
(Section)f(4.4.)348 1522 y Fi(2.4)67 b(Pr)o(epr)o(ocessing)17
b(is)g(Good)348 1628 y Fm(In)c(man)o(y)h(of)f(the)g(situations)e(where)
i(ray)g(casting)f(is)h(used,)g(it)g(is)g(v)o(ery)g(common)g(to)g(cast)g
(hundreds)348 1695 y(of)20 b(millions)d(of)j(rays.)34
b(This)19 b(usually)g(tak)o(es)g(a)h(much)f(longer)g(time)g(than)g(it)g
(took)h(to)f(b)o(uild)g(the)348 1763 y(ray)h(tracing)e(data)h
(structures.)33 b(A)19 b(lar)o(ge)g(percentage)g(increase)f(in)i(the)f
(time)f(it)h(tak)o(es)h(to)f(b)o(uild)348 1830 y(the)h(data)f
(structures)g(may)h(pro)o(vide)f(a)h(signi\002cant)f(win)g(e)o(v)o(en)h
(if)g(the)f(percentage)g(decrease)h(in)348 1897 y(the)c(ray)g(casting)f
(time)g(of)h(each)g(ray)g(is)g(much)g(smaller)m(.)22
b(Ideally)15 b(you)i(increase)e(the)g(comple)o(xity)348
1965 y(and)20 b(sophistication)f(of)g(the)h(hierarchy)f(b)o(uilding)g
(stage)g(in)h(order)f(to)h(reduce)g(the)f(comple)o(xity)348
2032 y(and)h(number)f(of)g(intersections)e(computed)i(during)g(the)f
(ray)h(tra)o(v)o(ersal)f(stage.)33 b(This)19 b(principle)348
2100 y(moti)o(v)o(ates)12 b(Section)i(4.3.)348 2260 y
Fi(2.5)67 b(Compute)18 b(Only)f(What)h(Y)-7 b(ou)16 b(Need)348
2366 y Fm(There)i(are)f(man)o(y)g(dif)o(ferent)e(algorithms)h(for)h
(man)o(y)g(of)h(the)f(components)g(of)g(ray)g(casting.)26
b(Of-)348 2433 y(ten)15 b(there)f(are)h(dif)o(ferent)e(algorithms)g
(because)i(dif)o(ferent)e(information)g(is)h(needed)i(out)e(of)h(them.)
348 2501 y(Much)20 b(of)g(the)g(follo)o(wing)e(discussion)h(will)g(be)h
(based)g(on)g(the)g(principle)e(of)i(determining)f(the)348
2568 y(minimum)d(amount)h(of)g(information)f(needed)i(and)f(then)g
(computing)g(or)g(using)h(that)e(and)i(noth-)348 2635
y(ing)f(more.)27 b(Often)16 b(this)g(results)g(in)h(a)g(f)o(aster)f
(algorithm.)25 b(Examples)17 b(of)g(this)g(will)e(be)i(sho)o(wn)g(in)
348 2703 y(Sections)d(4.1)g(and)g(4.2.)348 2892 y Fn(3)82
b(Ov)o(er)o(view)22 b(of)e(Bounding)i(V)-8 b(olume)22
b(Hierar)o(chies)348 3018 y Fm(A)d(bounding)h(v)o(olume)e(hierarchy)g
(is)h(simply)f(a)h(tree)g(of)g(bounding)g(v)o(olumes.)33
b(The)19 b(bounding)348 3085 y(v)o(olume)d(at)f(a)h(gi)o(v)o(en)g(node)
g(encloses)f(the)h(bounding)g(v)o(olumes)g(of)f(its)g(children.)23
b(The)16 b(bounding)348 3153 y(v)o(olume)h(of)g(a)h(leaf)e(encloses)h
(a)g(primiti)o(v)o(e.)26 b(If)16 b(a)i(ray)f(misses)f(the)h(bounding)h
(v)o(olume)f(of)g(a)g(par)o(-)348 3220 y(ticular)d(node,)h(then)f(the)h
(ray)f(will)f(miss)h(all)g(of)g(its)g(children,)g(and)h(the)f(children)
g(can)h(be)g(skipped.)348 3288 y(The)h(ray)f(casting)f(algorithm)g(tra)
o(v)o(erses)g(this)g(hierarchy)l(,)h(usually)g(in)g(depth)g(\002rst)f
(order)n(,)h(and)h(de-)348 3355 y(termines)d(if)g(the)h(ray)g
(intersects)e(an)i(object.)1303 3556 y(3)p eop
%%Page: 4 4
4 3 bop 404 336 a Fm(BoundingV)-7 b(olume)14 b Fh(BuildHierar)o(ch)o(y)
p Fm(\(b)o(vList,)f(start,)g(end,)h(axis\))461 404 y
Fh(if)p Fm(\(end)f(-)h(start)e(==)i(0\))115 b Fg(//)13
b(only)h(a)g(single)g(bv)g(in)f(list)g(so)h(r)n(eturn)g(it.)517
471 y Fh(r)o(etur)o(n)g Fm(b)o(vList[start])461 539 y(BoundingV)-7
b(olume)13 b(parent)461 606 y Fh(f)o(or)o(each)g Fm(b)o(v)i
Fh(in)f Fm(b)o(vList)517 674 y(e)o(xpand)g(parent)g(to)f(enclose)h(b)o
(v)461 741 y(sort)f(b)o(vList)h(along)g(axis)461 808
y(axis)f(=)h(ne)o(xt)g(axis)461 876 y(parent.AddChild\()p
Fh(BuildHierar)o(ch)o(y)p Fm(\(b)o(vList,)e(start,)h(\(start)f(+)i
(end\))g(/)f(2,)i(axis\))461 943 y(parent.AddChild\()p
Fh(BuildHierar)o(ch)o(y)p Fm(\(b)o(vList,)d(1)i(+)g(\(start)e(+)i
(end\))g(/)f(2,)i(end,)f(axis\))461 1011 y Fh(r)o(etur)o(n)g
Fm(parent)636 1134 y(Figure)g(1:)j(Building)c(a)h(bounding)h(v)o(olume)
e(hierarchy)g(recursi)o(v)o(ely)l(.)433 1315 y(There)i(are)f(se)o(v)o
(eral)g(w)o(ays)h(of)g(b)o(uilding)f(bounding)i(v)o(olume)e
(hierarchies)g([6,)h(10].)20 b(The)c(sim-)348 1382 y(plest)e(w)o(ay)h
(to)f(b)o(uild)g(them)h(is)f(to)g(tak)o(e)h(a)g(list)e(of)i(bounding)g
(v)o(olumes)f(containing)f(the)i(primiti)o(v)o(es)348
1450 y(and)d(sort)f(along)g(an)h(axis[8)o(].)k(Split)11
b(the)g(list)f(in)h(half,)h(put)f(a)h(bounding)f(box)h(around)g(each)f
(half,)g(and)348 1517 y(then)j(recurse,)f(c)o(ycling)h(through)f(the)h
(ax)o(es)g(as)f(you)h(recurse.)j(This)d(is)f(e)o(xpressed)h(in)f
(pseudocode)348 1585 y(in)i(Figure)f(1.)20 b(This)14
b(method)h(can)f(be)h(modi\002ed)f(in)h(man)o(y)g(w)o(ays)f(to)h
(produce)f(better)g(hierarchies.)348 1652 y(A)j(better)f(w)o(ay)h(to)g
(b)o(uild)f(the)h(hierarchy)e(is)i(to)g(try)f(to)h(minimize)e(the)i
(cost)f(functions)g(described)348 1719 y(by)f(Goldsmith)d(and)i(Salmon)
g([6)o(].)348 1909 y Fn(4)82 b(Optimizations)23 b(f)n(or)d(Bounding)i
(V)-8 b(olume)22 b(Hierar)o(chies)348 2046 y Fi(4.1)67
b(Bounding)18 b(Box)e(Intersections)348 2151 y Fm(Intersecting)g(rays)h
(with)g(bounding)g(v)o(olumes)g(usually)g(accounts)g(for)g(most)g(of)g
(the)g(time)g(spent)348 2219 y(casting)j(rays.)37 b(This)21
b(mak)o(es)f(bounding)h(v)o(olume)f(intersection)f(tests)g(an)i(ideal)f
(candidate)g(for)348 2286 y(optimization.)34 b(The)20
b(\002rst)f(issue)h(is)f(what)g(sort)h(of)f(bounding)h(v)o(olumes)g(to)
f(use.)36 b(Most)19 b(of)h(the)348 2353 y(en)n(vironments)11
b(I)g(w)o(ork)h(with)f(are)g(architectural)f(and)i(ha)o(v)o(e)g(man)o
(y)f(axis-aligned)g(planar)g(surf)o(aces.)348 2421 y(This)j(mak)o(es)h
(axis-aligned)d(bounding)j(box)o(es)f(ideal.)k(Spheres)c(tend)g(not)g
(to)g(w)o(ork)g(v)o(ery)g(well)f(for)348 2488 y(this)h(type)f(of)h(en)n
(vironment.)433 2556 y(There)k(are)h(man)o(y)f(w)o(ays)h(to)f
(represent)g(and)h(intersect)e(an)i(axis-aligned)e(bounding)i(box.)32
b(I)348 2623 y(ha)o(v)o(e)16 b(seen)g(bounding)g(box)h(code)f(that)f
(computed)h(the)f(intersection)f(point)i(of)g(the)f(ray)h(with)f(the)
348 2690 y(box.)21 b(If)15 b(there)g(w)o(as)f(an)i(intersection)d
(point,)i(the)g(ray)g(hits)f(the)h(box,)h(and)f(if)g(not,)g(the)g(ray)g
(misses.)348 2758 y(There)j(are)g(optimizations)e(that)i(can)g(be)g
(made)g(to)f(this)h(approach,)h(such)f(as)g(making)f(sure)h(you)348
2825 y(only)13 b(check)h(f)o(aces)e(that)h(are)g(oriented)f(to)o(w)o
(ards)g(the)h(ray)l(,)g(and)h(taking)e(adv)o(antage)h(of)g(the)f(f)o
(act)h(that)348 2893 y(the)k(planes)g(are)g(axis)g(aligned)f([11].)27
b(Still,)17 b(the)g(approach)g(is)g(too)g(slo)o(w)l(.)26
b(The)18 b(\002rst)f(hint)f(of)h(this)348 2960 y(is)e(that)f(the)h
(algorithm)e(computes)h(an)h(intersection)e(point.)20
b(W)l(e)14 b(don')o(t)h(care)g(about)f(that,)h(we)f(just)348
3027 y(w)o(ant)19 b(a)g(yes)g(or)f(no)i(answer)m(.)31
b(Kay)18 b([8])h(represented)f(bounding)h(v)o(olumes)f(as)h(the)f
(intersection)348 3095 y(of)e(a)h(set)f(of)g(slabs)f(\(parallel)g
(planes\).)24 b(A)15 b(slab)h(is)g(stored)g(as)g(a)g(direction,)g
Ff(D)1881 3103 y Fe(s)1904 3095 y Fm(,)h(and)g(an)f(interv)o(al,)348
3162 y Ff(I)373 3170 y Fe(s)397 3162 y Fm(,)e(representing)g(the)g
(minimum)e(and)j(maximum)e(v)o(alue)h(in)g(that)f(direction,)h(ef)o
(fecti)o(v)o(ely)e(as)i(tw)o(o)348 3230 y(plane)i(equations.)21
b(The)16 b(set)f(of)h(slab)f(directions)f(is)h(\002x)o(ed)h(in)g(adv)o
(ance.)22 b(In)15 b(my)h(e)o(xperience,)f(this)348 3297
y(approach)i(is)f(most)h(ef)o(fecti)o(v)o(e)d(when)j(there)f(are)h
(three,)g(axis)f(aligned,)h(slab)g(directions.)24 b(This)17
b(is)348 3365 y(just)f(another)g(w)o(ay)g(of)g(storing)f(a)i(bounding)f
(box,)h(we)f(store)g(minimum)f(and)h(maximum)f(v)o(alues)1303
3556 y(4)p eop
%%Page: 5 5
5 4 bop 404 336 a Fm(bool)14 b Fh(RaySlabsIntersection)p
Fm(\(ray)l(,)f(bbox\))461 404 y(Interv)o(al)f(inside)h(=)h(ray)l
(.Range\(\))461 471 y Fh(f)o(or)f Fm(i)h Fh(in)g Fm(\(0,1,2\))517
539 y(inside)f(=)h(Intersection\(inside,\(slab[i])o(.Range\(\)-ray)l
(.Or)o(igin[)o(i]\))o(/ray)l(.Di)o(recti)o(on[i])o(\))517
606 y Fh(if)p Fm(\(inside.IsEmpty\(\)\))573 674 y Fh(r)o(etur)o(n)g
(false)461 741 y(r)o(etur)o(n)g(true)348 865 y Fm(Figure)21
b(2:)31 b(Pseudocode)22 b(for)e(intersecting)f(a)i(ray)g(with)f(a)h
(box)h(represented)e(as)g(axis)h(aligned)348 932 y(slabs.)348
1099 y(along)14 b(each)g(axis.)433 1167 y(Gi)o(v)o(en)j(this)h
(representation,)g(we)g(can)h(intersect)e(a)h(bounding)h(box)g(f)o
(airly)f(ef)o(\002ciently)l(.)30 b(W)l(e)348 1234 y(sho)o(w)17
b(this)f(in)h(pseudocode)h(in)f(Figure)g(2.)27 b(This)17
b(code)g(isn')o(t)g(as)g(simple)f(as)h(it)f(looks)h(due)h(to)f(the)348
1302 y(comparisons)c(of)g(the)h(IsEmpty)f(and)g(Intersection)f
(functions)h(and)h(the)f(need)h(to)f(re)o(v)o(erse)g(the)g(min)348
1369 y(and)h(max)g(v)o(alues)f(of)h(the)g(interv)o(al)e(when)i(di)o
(viding)f(by)h(a)g(ne)o(gati)o(v)o(e)f(number)n(,)h(b)o(ut)f(it)h(is)f
(still)g(much)348 1436 y(f)o(aster)h(than)f(computing)h(the)f
(intersection)g(point)g(with)g(the)h(box.)433 1504 y(One)i(important)g
(thing)h(to)g(notice)g(about)g(this)f(representation)g(and)h(this)g
(intersection)e(code)348 1571 y(is)g(that)f(it)g(gi)o(v)o(es)g(the)h
(right)f(answer)g(when)g(the)h(ray)f(direction)g(is)g(0)h(for)g(a)g
(particular)e(component.)348 1639 y(In)i(this)f(case)g(the)h(ray)f(is)g
(parallel)f(to)i(the)f(planes)h(of)f(the)g(slab)n(.)19
b(The)c(di)o(vide)f(by)h(zero)f(gi)o(v)o(es)h(either)348
1706 y Fd([)p Fj(\0001)p Ff(;)9 b Fj(\0001)p Fd(])17
b Fm(or)h Fd([+)p Fj(1)p Ff(;)9 b Fd(+)p Fj(1)p Fd(])16
b Fm(when)i(the)f(ray)h(is)f(outside)g(the)g(slab)h(and)g
Fd([)p Fj(\0001)p Ff(;)9 b Fd(+)p Fj(1)p Fd(])16 b Fm(when)i(the)348
1774 y(ray)c(is)g(inside.)i(This)e(sa)o(v)o(es)g(additional)f(checks)h
(on)g(the)g(ray)f(direction.)348 1934 y Fi(4.2)67 b(Intersection)18
b(Rays)e(v)o(ersus)i(Shado)o(w)g(Rays)348 2039 y Fm(It)e(is)g
(important)f(to)h(kno)o(w)f(what)h(kind)g(of)g(information)f(you)i
(need)f(from)f(the)h(ray)h(casting)e(algo-)348 2107 y(rithm)j(in)h
(order)g(to)g(k)o(eep)h(from)f(doing)g(more)g(w)o(ork)g(than)g
(necessary)l(.)33 b(There)19 b(are)g(three)g(com-)348
2174 y(monly)c(used)h(ray)f(casting)g(queries:)k(closest)c(hit,)g(an)o
(y)h(hit,)f(and)h(all)f(hits.)21 b(Closest)15 b(hit)g(is)g(used)h(to)
348 2242 y(determine)f(the)h(\002rst)f(object)g(in)h(a)g(gi)o(v)o(en)f
(direction.)22 b(This)16 b(query)g(is)g(usually)f(used)h(for)f(primary)
l(,)348 2309 y(re\003ected,)g(and)h(transmitted)d(rays.)21
b(An)o(y)15 b(hit)g(is)g(used)g(for)g(visibility)e(tests)h(between)h
(tw)o(o)g(points.)348 2376 y(This)h(is)g(done)g(when)g(checking)g(to)g
(see)g(if)f(a)h(point)g(is)f(lit)g(directly)g(by)i(a)f(light)f(and)h
(for)g(visibility)348 2444 y(estimation)f(in)h(radiosity)e(algorithms.)
23 b(The)16 b(object)g(hit)g(is)f(not)h(needed,)h(only)f(the)g(e)o
(xistence)g(of)348 2511 y(a)j(hit.)33 b(All)18 b(hits)g(is)h(used)g
(for)g(e)o(v)o(aluating)e(CSG)j(models)e(directly)l(.)32
b(The)20 b(CSG)g(operations)e(are)348 2579 y(performed)13
b(on)i(the)e(list)g(of)h(interv)o(als)e(returned)h(from)g(the)h(all)f
(hits)h(intersection)e(routine.)433 2646 y(F)o(or)18
b(ef)o(\002cienc)o(y)f(reasons)h(it)f(is)g(important)g(to)h(k)o(eep)g
(these)g(queries)f(separate.)28 b(This)18 b(can)g(be)348
2713 y(seen)h(by)f(looking)g(at)g(what)g(happens)g(when)g(using)h(the)f
(most)f(general)h(query)l(,)i(all)e(hits,)g(to)g(im-)348
2781 y(plement)k(the)g(others.)41 b(An)o(y)23 b(hit)e(will)g(simply)g
(check)i(to)f(see)g(if)f(the)h(list)g(of)g(intersections)e(is)348
2848 y(empty)l(.)28 b(Clearly)17 b(we)g(computed)g(more)g(than)g(we)g
(needed)h(in)f(this)g(case.)27 b(Closest)17 b(hit)g(will)f(sort)348
2916 y(the)i(list)f(and)h(return)f(the)g(closest)g(intersection.)28
b(It)17 b(may)h(seem)f(as)h(if)f(the)h(same)f(or)h(more)g(w)o(ork)348
2983 y(is)g(needed)g(for)g(this)g(query)l(,)h(ho)o(we)o(v)o(er)f(this)f
(is)h(usually)f(not)i(the)e(case.)30 b(W)n(ith)18 b(most)f(ray)h
(tracing)348 3050 y(ef)o(\002cienc)o(y)c(schemes,)f(once)i(an)f
(intersection)e(is)i(found,)h(parts)e(of)h(the)g(en)n(vironment)f(be)o
(yond)i(the)348 3118 y(intersection)h(point)h(can)g(be)h(ignored.)27
b(Finding)18 b(intersections)d(usually)i(speeds)g(up)h(the)f(rest)g(of)
348 3185 y(the)d(tra)o(v)o(ersal.)i(Also,)d(the)h(list)f(of)g(hit)h
(data)f(does)h(not)g(need)g(to)g(be)g(maintained.)433
3253 y(Shado)o(w)19 b(\(an)o(y)g(hit\))g(rays)g(are)g(usually)g(the)g
(most)g(common)h(type)f(of)g(rays)g(cast,)i(often)e(ac-)348
3320 y(counting)d(for)f(more)g(than)g(90)h(percent)f(of)g(all)g(rays.)
22 b(Because)16 b(of)f(this,)g(it)g(is)g(w)o(orth)g(considering)348
3388 y(ho)o(w)g(to)f(mak)o(e)i(them)e(f)o(aster)g(than)h(other)g(types)
f(of)h(rays.)20 b(Shado)o(w)15 b(rays)g(need)g(not)g(compute)f(an)o(y)
1303 3556 y(5)p eop
%%Page: 6 6
6 5 bop 708 734 a @beginspecial 52 @llx 562 @lly 485
@urx 717 @ury 2160 @rwi @setspecial
%%BeginDocument: trees.ill
%AI5_FileFormat 3.0
%AI3_ColorUsage: Black&White
%AI3_TemplateBox: 306 396 306 396
%AI3_TileBox: 30 31 582 761
%AI3_DocumentPreview: Header
%AI5_ArtSize: 612 792
%AI5_RulerUnits: 2
%AI5_ArtFlags: 1 0 0 1 0 0 1 1 0
%AI5_TargetResolution: 800
%AI5_NumLayers: 1
%AI5_OpenToView: 18 972 1 685 809 18 0 1 181 108
%AI5_OpenViewLayers: 7
userdict /Adobe_level2_AI5 21 dict dup begin
	put
	/packedarray where not
	{
		userdict begin
		/packedarray
		{
			array astore readonly
		} bind def
		/setpacking /pop load def
		/currentpacking false def
	 end
		0
	} if
	pop
	userdict /defaultpacking currentpacking put true setpacking
	/initialize
	{
		Adobe_level2_AI5 begin
	} bind def
	/terminate
	{
		currentdict Adobe_level2_AI5 eq
		{
		 end
		} if
	} bind def
	mark
	/setcustomcolor where not
	{
		/findcmykcustomcolor
		{
			5 packedarray
		} bind def
		/setcustomcolor
		{
			exch aload pop pop
			4
			{
				4 index mul 4 1 roll
			} repeat
			5 -1 roll pop
			setcmykcolor
		}
		def
	} if
	
	/gt38? mark {version cvx exec} stopped {cleartomark true} {38 gt exch pop} ifelse def
	userdict /deviceDPI 72 0 matrix defaultmatrix dtransform dup mul exch dup mul add sqrt put
	userdict /level2?
	systemdict /languagelevel known dup
	{
		pop systemdict /languagelevel get 2 ge
	} if
	put
	level2? not
	{
		/setcmykcolor where not
		{
			/setcmykcolor
			{
				exch .11 mul add exch .59 mul add exch .3 mul add
				1 exch sub setgray
			} def
		} if
		/currentcmykcolor where not
		{
			/currentcmykcolor
			{
				0 0 0 1 currentgray sub
			} def
		} if
		/setoverprint where not
		{
			/setoverprint /pop load def
		} if
		/selectfont where not
		{
			/selectfont
			{
				exch findfont exch
				dup type /arraytype eq
				{
					makefont
				}
				{
					scalefont
				} ifelse
				setfont
			} bind def
		} if
		/cshow where not
		{
			/cshow
			{
				[
				0 0 5 -1 roll aload pop
				] cvx bind forall
			} bind def
		} if
	} if
	cleartomark
	/anyColor?
	{
		add add add 0 ne
	} bind def
	/testColor
	{
		gsave
		setcmykcolor currentcmykcolor
		grestore
	} bind def
	/testCMYKColorThrough
	{
		testColor anyColor?
	} bind def
	userdict /composite?
	level2?
	{
		gsave 1 1 1 1 setcmykcolor currentcmykcolor grestore
		add add add 4 eq
	}
	{
		1 0 0 0 testCMYKColorThrough
		0 1 0 0 testCMYKColorThrough
		0 0 1 0 testCMYKColorThrough
		0 0 0 1 testCMYKColorThrough
		and and and
	} ifelse
	put
	composite? not
	{
		userdict begin
		gsave
		/cyan? 1 0 0 0 testCMYKColorThrough def
		/magenta? 0 1 0 0 testCMYKColorThrough def
		/yellow? 0 0 1 0 testCMYKColorThrough def
		/black? 0 0 0 1 testCMYKColorThrough def
		grestore
		/isCMYKSep? cyan? magenta? yellow? black? or or or def
		/customColor? isCMYKSep? not def
	 end
	} if
 end defaultpacking setpacking
currentpacking true setpacking
userdict /Adobe_typography_AI5 54 dict dup begin
put
/initialize
{
 begin
 begin
	Adobe_typography_AI5 begin
	Adobe_typography_AI5
	{
		dup xcheck
		{
			bind
		} if
		pop pop
	} forall
 end
 end
 end
	Adobe_typography_AI5 begin
} def
/terminate
{
	currentdict Adobe_typography_AI5 eq
	{
	 end
	} if
} def
/modifyEncoding
{
	/_tempEncode exch ddef
	/_pntr 0 ddef
	{
		counttomark -1 roll
		dup type dup /marktype eq
		{
			pop pop exit
		}
		{
			/nametype eq
			{
				_tempEncode /_pntr dup load dup 3 1 roll 1 add ddef 3 -1 roll
				put
			}
			{
				/_pntr exch ddef
			} ifelse
		} ifelse
	} loop
	_tempEncode
} def
/TE
{
	StandardEncoding 256 array copy modifyEncoding
	/_nativeEncoding exch def
} def
%
/TZ
{
	dup type /arraytype eq
	{
		/_wv exch def
	}
	{
		/_wv 0 def
	} ifelse
	/_useNativeEncoding exch def
	pop pop
	findfont _wv type /arraytype eq
	{
		_wv makeblendedfont
	} if
	dup length 2 add dict
 begin
	mark exch
	{
		1 index /FID ne
		{
			def
		} if
		cleartomark mark
	} forall
	pop
	/FontName exch def
	counttomark 0 eq
	{
		1 _useNativeEncoding eq
		{
			/Encoding _nativeEncoding def
		} if
		cleartomark
	}
	{
		/Encoding load 256 array copy
		modifyEncoding /Encoding exch def
	} ifelse
	FontName currentdict
 end
	definefont pop
} def
/tr
{
	_ax _ay 3 2 roll
} def
/trj
{
	_cx _cy _sp _ax _ay 6 5 roll
} def
/a0
{
	/Tx
	{
		dup
		currentpoint 3 2 roll
		tr _psf
		newpath moveto
		tr _ctm _pss
	} ddef
	/Tj
	{
		dup
		currentpoint 3 2 roll
		trj _pjsf
		newpath moveto
		trj _ctm _pjss
	} ddef
} def
/a1
{
	/Tx
	{
		dup currentpoint 4 2 roll gsave
		dup currentpoint 3 2 roll
		tr _psf
		newpath moveto
		tr _ctm _pss
		grestore 3 1 roll moveto tr sp
	} ddef
	/Tj
	{
		dup currentpoint 4 2 roll gsave
		dup currentpoint 3 2 roll
		trj _pjsf
		newpath moveto
		trj _ctm _pjss
		grestore 3 1 roll moveto tr jsp
	} ddef
} def
/e0
{
	/Tx
	{
		tr _psf
	} ddef
	/Tj
	{
		trj _pjsf
	} ddef
} def
/e1
{
	/Tx
	{
		dup currentpoint 4 2 roll gsave
		tr _psf
		grestore 3 1 roll moveto tr sp
	} ddef
	/Tj
	{
		dup currentpoint 4 2 roll gsave
		trj _pjsf
		grestore 3 1 roll moveto tr jsp
	} ddef
} def
/i0
{
	/Tx
	{
		tr sp
	} ddef
	/Tj
	{
		trj jsp
	} ddef
} def
/i1
{
	W N
} def
/o0
{
	/Tx
	{
		tr sw rmoveto
	} ddef
	/Tj
	{
		trj swj rmoveto
	} ddef
} def
/r0
{
	/Tx
	{
		tr _ctm _pss
	} ddef
	/Tj
	{
		trj _ctm _pjss
	} ddef
} def
/r1
{
	/Tx
	{
		dup currentpoint 4 2 roll currentpoint gsave newpath moveto
		tr _ctm _pss
		grestore 3 1 roll moveto tr sp
	} ddef
	/Tj
	{
		dup currentpoint 4 2 roll currentpoint gsave newpath moveto
		trj _ctm _pjss
		grestore 3 1 roll moveto tr jsp
	} ddef
} def
/To
{
	pop _ctm currentmatrix pop
} def
/TO
{
	iTe _ctm setmatrix newpath
} def
/Tp
{
	pop _tm astore pop _ctm setmatrix
	_tDict begin
	/W
	{
	} def
	/h
	{
	} def
} def
/TP
{
 end
	iTm 0 0 moveto
} def
/Tr
{
	_render 3 le
	{
		currentpoint newpath moveto
	} if
	dup 8 eq
	{
		pop 0
	}
	{
		dup 9 eq
		{
			pop 1
		} if
	} ifelse
	dup /_render exch ddef
	_renderStart exch get load exec
} def
/iTm
{
	_ctm setmatrix _tm concat 0 _rise translate _hs 1 scale
} def
/Tm
{
	_tm astore pop iTm 0 0 moveto
} def
/Td
{
	_mtx translate _tm _tm concatmatrix pop iTm 0 0 moveto
} def
/iTe
{
	_render -1 eq
	{
	}
	{
		_renderEnd _render get dup null ne
		{
			load exec
		}
		{
			pop
		} ifelse
	} ifelse
	/_render -1 ddef
} def
/Ta
{
	pop
} def
/Tf
{
	dup 1000 div /_fScl exch ddef
%
	selectfont
} def
/Tl
{
	pop
	0 exch _leading astore pop
} def
/Tt
{
	pop
} def
/TW
{
	3 npop
} def
/Tw
{
	/_cx exch ddef
} def
/TC
{
	3 npop
} def
/Tc
{
	/_ax exch ddef
} def
/Ts
{
	/_rise exch ddef
	currentpoint
	iTm
	moveto
} def
/Ti
{
	3 npop
} def
/Tz
{
	100 div /_hs exch ddef
	iTm
} def
/TA
{
	pop
} def
/Tq
{
	pop
} def
/Th
{
	pop pop pop pop pop
} def
/TX
{
	pop
} def
/Tk
{
	exch pop _fScl mul neg 0 rmoveto
} def
/TK
{
	2 npop
} def
/T*
{
	_leading aload pop neg Td
} def
/T*-
{
	_leading aload pop Td
} def
/T-
{
	_hyphen Tx
} def
/T+
{
} def
/TR
{
	_ctm currentmatrix pop
	_tm astore pop
	iTm 0 0 moveto
} def
/TS
{
	currentfont 3 1 roll
	/_Symbol_ _fScl 1000 mul selectfont
	
	0 eq
	{
		Tx
	}
	{
		Tj
	} ifelse
	setfont
} def
/Xb
{
	pop pop
} def
/Tb /Xb load def
/Xe
{
	pop pop pop pop
} def
/Te /Xe load def
/XB
{
} def
/TB /XB load def
currentdict readonly pop
end
setpacking
currentpacking true setpacking
userdict /Adobe_IllustratorA_AI5_vars 70 dict dup begin
put
/_lp /none def
/_pf
{
} def
/_ps
{
} def
/_psf
{
} def
/_pss
{
} def
/_pjsf
{
} def
/_pjss
{
} def
/_pola 0 def
/_doClip 0 def
/cf currentflat def
/_tm matrix def
/_renderStart
[
/e0 /r0 /a0 /o0 /e1 /r1 /a1 /i0
] def
/_renderEnd
[
null null null null /i1 /i1 /i1 /i1
] def
/_render -1 def
/_rise 0 def
/_ax 0 def
/_ay 0 def
/_cx 0 def
/_cy 0 def
/_leading
[
0 0
] def
/_ctm matrix def
/_mtx matrix def
/_sp 16#020 def
/_hyphen (-) def
/_fScl 0 def
/_cnt 0 def
/_hs 1 def
/_nativeEncoding 0 def
/_useNativeEncoding 0 def
/_tempEncode 0 def
/_pntr 0 def
/_tDict 2 dict def
/_wv 0 def
/Tx
{
} def
/Tj
{
} def
/CRender
{
} def
/_AI3_savepage
{
} def
/_gf null def
/_cf 4 array def
/_if null def
/_of false def
/_fc
{
} def
/_gs null def
/_cs 4 array def
/_is null def
/_os false def
/_sc
{
} def
/discardSave null def
/buffer 256 string def
/beginString null def
/endString null def
/endStringLength null def
/layerCnt 1 def
/layerCount 1 def
/perCent (%) 0 get def
/perCentSeen? false def
/newBuff null def
/newBuffButFirst null def
/newBuffLast null def
/clipForward? false def
end
userdict /Adobe_IllustratorA_AI5 74 dict dup begin
put
/initialize
{
	Adobe_IllustratorA_AI5 dup begin
	Adobe_IllustratorA_AI5_vars begin
	discardDict
	{
		bind pop pop
	} forall
	dup /nc get begin
	{
		dup xcheck 1 index type /operatortype ne and
		{
			bind
		} if
		pop pop
	} forall
 end
	newpath
} def
/terminate
{
 end
 end
} def
/_
null def
/ddef
{
	Adobe_IllustratorA_AI5_vars 3 1 roll put
} def
/xput
{
	dup load dup length exch maxlength eq
	{
		dup dup load dup
		length 2 mul dict copy def
	} if
	load begin
	def
 end
} def
/npop
{
	{
		pop
	} repeat
} def
/sw
{
	dup length exch stringwidth
	exch 5 -1 roll 3 index mul add
	4 1 roll 3 1 roll mul add
} def
/swj
{
	dup 4 1 roll
	dup length exch stringwidth
	exch 5 -1 roll 3 index mul add
	4 1 roll 3 1 roll mul add
	6 2 roll /_cnt 0 ddef
	{
		1 index eq
		{
			/_cnt _cnt 1 add ddef
		} if
	} forall
	pop
	exch _cnt mul exch _cnt mul 2 index add 4 1 roll 2 index add 4 1 roll pop pop
} def
/ss
{
	4 1 roll
	{
		2 npop
		(0) exch 2 copy 0 exch put pop
		gsave
		false charpath currentpoint
		4 index setmatrix
		stroke
		grestore
		moveto
		2 copy rmoveto
	} exch cshow
	3 npop
} def
/jss
{
	4 1 roll
	{
		2 npop
		(0) exch 2 copy 0 exch put
		gsave
		_sp eq
		{
			exch 6 index 6 index 6 index 5 -1 roll widthshow
			currentpoint
		}
		{
			false charpath currentpoint
			4 index setmatrix stroke
		} ifelse
		grestore
		moveto
		2 copy rmoveto
	} exch cshow
	6 npop
} def
/sp
{
	{
		2 npop (0) exch
		2 copy 0 exch put pop
		false charpath
		2 copy rmoveto
	} exch cshow
	2 npop
} def
/jsp
{
	{
		2 npop
		(0) exch 2 copy 0 exch put
		_sp eq
		{
			exch 5 index 5 index 5 index 5 -1 roll widthshow
		}
		{
			false charpath
		} ifelse
		2 copy rmoveto
	} exch cshow
	5 npop
} def
/pl
{
	transform
	0.25 sub round 0.25 add exch
	0.25 sub round 0.25 add exch
	itransform
} def
/setstrokeadjust where
{
	pop true setstrokeadjust
	/c
	{
		curveto
	} def
	/C
	/c load def
	/v
	{
		currentpoint 6 2 roll curveto
	} def
	/V
	/v load def
	/y
	{
		2 copy curveto
	} def
	/Y
	/y load def
	/l
	{
		lineto
	} def
	/L
	/l load def
	/m
	{
		moveto
	} def
}
{
	/c
	{
		pl curveto
	} def
	/C
	/c load def
	/v
	{
		currentpoint 6 2 roll pl curveto
	} def
	/V
	/v load def
	/y
	{
		pl 2 copy curveto
	} def
	/Y
	/y load def
	/l
	{
		pl lineto
	} def
	/L
	/l load def
	/m
	{
		pl moveto
	} def
} ifelse
/d
{
	setdash
} def
/cf
{
} def
/i
{
	dup 0 eq
	{
		pop cf
	} if
	setflat
} def
/j
{
	setlinejoin
} def
/J
{
	setlinecap
} def
/M
{
	setmiterlimit
} def
/w
{
	setlinewidth
} def
/H
{
} def
/h
{
	closepath
} def
/N
{
	_pola 0 eq
	{
		_doClip 1 eq
		{
			clip /_doClip 0 ddef
		} if
		newpath
	}
	{
		/CRender
		{
			N
		} ddef
	} ifelse
} def
/n
{
	N
} def
/F
{
	_pola 0 eq
	{
		_doClip 1 eq
		{
			gsave _pf grestore clip newpath /_lp /none ddef _fc
			/_doClip 0 ddef
		}
		{
			_pf
		} ifelse
	}
	{
		/CRender
		{
			F
		} ddef
	} ifelse
} def
/f
{
	closepath
	F
} def
/S
{
	_pola 0 eq
	{
		_doClip 1 eq
		{
			gsave _ps grestore clip newpath /_lp /none ddef _sc
			/_doClip 0 ddef
		}
		{
			_ps
		} ifelse
	}
	{
		/CRender
		{
			S
		} ddef
	} ifelse
} def
/s
{
	closepath
	S
} def
/B
{
	_pola 0 eq
	{
		_doClip 1 eq
		gsave F grestore
		{
			gsave S grestore clip newpath /_lp /none ddef _sc
			/_doClip 0 ddef
		}
		{
			S
		} ifelse
	}
	{
		/CRender
		{
			B
		} ddef
	} ifelse
} def
/b
{
	closepath
	B
} def
/W
{
	/_doClip 1 ddef
} def
/*
{
	count 0 ne
	{
		dup type /stringtype eq
		{
			pop
		} if
	} if
	newpath
} def
/u
{
} def
/U
{
} def
/q
{
	_pola 0 eq
	{
		gsave
	} if
} def
/Q
{
	_pola 0 eq
	{
		grestore
	} if
} def
/*u
{
	_pola 1 add /_pola exch ddef
} def
/*U
{
	_pola 1 sub /_pola exch ddef
	_pola 0 eq
	{
		CRender
	} if
} def
/D
{
	pop
} def
/*w
{
} def
/*W
{
} def
/`
{
	/_i save ddef
	clipForward?
	{
		nulldevice
	} if
	6 1 roll 4 npop
	concat pop
	userdict begin
	/showpage
	{
	} def
	0 setgray
	0 setlinecap
	1 setlinewidth
	0 setlinejoin
	10 setmiterlimit
	[] 0 setdash
	/setstrokeadjust where {pop false setstrokeadjust} if
	newpath
	0 setgray
	false setoverprint
} def
/~
{
 end
	_i restore
} def
/O
{
	0 ne
	/_of exch ddef
	/_lp /none ddef
} def
/R
{
	0 ne
	/_os exch ddef
	/_lp /none ddef
} def
/g
{
	/_gf exch ddef
	/_fc
	{
		_lp /fill ne
		{
			_of setoverprint
			_gf setgray
			/_lp /fill ddef
		} if
	} ddef
	/_pf
	{
		_fc
		fill
	} ddef
	/_psf
	{
		_fc
		ashow
	} ddef
	/_pjsf
	{
		_fc
		awidthshow
	} ddef
	/_lp /none ddef
} def
/G
{
	/_gs exch ddef
	/_sc
	{
		_lp /stroke ne
		{
			_os setoverprint
			_gs setgray
			/_lp /stroke ddef
		} if
	} ddef
	/_ps
	{
		_sc
		stroke
	} ddef
	/_pss
	{
		_sc
		ss
	} ddef
	/_pjss
	{
		_sc
		jss
	} ddef
	/_lp /none ddef
} def
/k
{
	_cf astore pop
	/_fc
	{
		_lp /fill ne
		{
			_of setoverprint
			_cf aload pop setcmykcolor
			/_lp /fill ddef
		} if
	} ddef
	/_pf
	{
		_fc
		fill
	} ddef
	/_psf
	{
		_fc
		ashow
	} ddef
	/_pjsf
	{
		_fc
		awidthshow
	} ddef
	/_lp /none ddef
} def
/K
{
	_cs astore pop
	/_sc
	{
		_lp /stroke ne
		{
			_os setoverprint
			_cs aload pop setcmykcolor
			/_lp /stroke ddef
		} if
	} ddef
	/_ps
	{
		_sc
		stroke
	} ddef
	/_pss
	{
		_sc
		ss
	} ddef
	/_pjss
	{
		_sc
		jss
	} ddef
	/_lp /none ddef
} def
/x
{
	/_gf exch ddef
	findcmykcustomcolor
	/_if exch ddef
	/_fc
	{
		_lp /fill ne
		{
			_of setoverprint
			_if _gf 1 exch sub setcustomcolor
			/_lp /fill ddef
		} if
	} ddef
	/_pf
	{
		_fc
		fill
	} ddef
	/_psf
	{
		_fc
		ashow
	} ddef
	/_pjsf
	{
		_fc
		awidthshow
	} ddef
	/_lp /none ddef
} def
/X
{
	/_gs exch ddef
	findcmykcustomcolor
	/_is exch ddef
	/_sc
	{
		_lp /stroke ne
		{
			_os setoverprint
			_is _gs 1 exch sub setcustomcolor
			/_lp /stroke ddef
		} if
	} ddef
	/_ps
	{
		_sc
		stroke
	} ddef
	/_pss
	{
		_sc
		ss
	} ddef
	/_pjss
	{
		_sc
		jss
	} ddef
	/_lp /none ddef
} def
/A
{
	pop
} def
/annotatepage
{
userdict /annotatepage 2 copy known {get exec} {pop pop} ifelse
} def
/discard
{
	save /discardSave exch store
	discardDict begin
	/endString exch store
	gt38?
	{
		2 add
	} if
	load
	stopped
	pop
 end
	discardSave restore
} bind def
userdict /discardDict 7 dict dup begin
put
/pre38Initialize
{
	/endStringLength endString length store
	/newBuff buffer 0 endStringLength getinterval store
	/newBuffButFirst newBuff 1 endStringLength 1 sub getinterval store
	/newBuffLast newBuff endStringLength 1 sub 1 getinterval store
} def
/shiftBuffer
{
	newBuff 0 newBuffButFirst putinterval
	newBuffLast 0
	currentfile read not
	{
	stop
	} if
	put
} def
0
{
	pre38Initialize
	mark
	currentfile newBuff readstring exch pop
	{
		{
			newBuff endString eq
			{
				cleartomark stop
			} if
			shiftBuffer
		} loop
	}
	{
	stop
	} ifelse
} def
1
{
	pre38Initialize
	/beginString exch store
	mark
	currentfile newBuff readstring exch pop
	{
		{
			newBuff beginString eq
			{
				/layerCount dup load 1 add store
			}
			{
				newBuff endString eq
				{
					/layerCount dup load 1 sub store
					layerCount 0 eq
					{
						cleartomark stop
					} if
				} if
			} ifelse
			shiftBuffer
		} loop
	}
	{
	stop
	} ifelse
} def
2
{
	mark
	{
		currentfile buffer readline not
		{
		stop
		} if
		endString eq
		{
			cleartomark stop
		} if
	} loop
} def
3
{
	/beginString exch store
	/layerCnt 1 store
	mark
	{
		currentfile buffer readline not
		{
		stop
		} if
		dup beginString eq
		{
			pop /layerCnt dup load 1 add store
		}
		{
			endString eq
			{
				layerCnt 1 eq
				{
					cleartomark stop
				}
				{
					/layerCnt dup load 1 sub store
				} ifelse
			} if
		} ifelse
	} loop
} def
end
userdict /clipRenderOff 15 dict dup begin
put
{
	/n /N /s /S /f /F /b /B
}
{
	{
		_doClip 1 eq
		{
			/_doClip 0 ddef clip
		} if
		newpath
	} def
} forall
/Tr /pop load def
/Bb {} def
/BB /pop load def
/Bg {12 npop} def
/Bm {6 npop} def
/Bc /Bm load def
/Bh {4 npop} def
end
/Lb
{
	4 npop
	6 1 roll
	pop
	4 1 roll
	pop pop pop
	0 eq
	{
		0 eq
		{
			(%AI5_BeginLayer) 1 (%AI5_EndLayer--) discard
		}
		{
			/clipForward? true def
			
			/Tx /pop load def
			/Tj /pop load def
			currentdict end clipRenderOff begin begin
		} ifelse
	}
	{
		0 eq
		{
			save /discardSave exch store
		} if
	} ifelse
} bind def
/LB
{
	discardSave dup null ne
	{
		restore
	}
	{
		pop
		clipForward?
		{
			currentdict
		 end
		 end
		 begin
			
			/clipForward? false ddef
		} if
	} ifelse
} bind def
/Pb
{
	pop pop
	0 (%AI5_EndPalette) discard
} bind def
/Np
{
	0 (%AI5_End_NonPrinting--) discard
} bind def
/Ln /pop load def
/Ap
/pop load def
/Ar
{
	72 exch div
	0 dtransform dup mul exch dup mul add sqrt
	dup 1 lt
	{
		pop 1
	} if
	setflat
} def
/Mb
{
	q
} def
/Md
{
} def
/MB
{
	Q
} def
/nc 3 dict def
nc begin
/setgray
{
	pop
} bind def
/setcmykcolor
{
	4 npop
} bind def
/setcustomcolor
{
	2 npop
} bind def
currentdict readonly pop
end
currentdict readonly pop
end
setpacking
Adobe_level2_AI5 /initialize get exec
Adobe_IllustratorA_AI5_vars Adobe_IllustratorA_AI5 Adobe_typography_AI5 /initialize get exec
Adobe_IllustratorA_AI5 /initialize get exec
[
39/quotesingle 96/grave 128/Adieresis/Aring/Ccedilla/Eacute/Ntilde/Odieresis
/Udieresis/aacute/agrave/acircumflex/adieresis/atilde/aring/ccedilla/eacute
/egrave/ecircumflex/edieresis/iacute/igrave/icircumflex/idieresis/ntilde
/oacute/ograve/ocircumflex/odieresis/otilde/uacute/ugrave/ucircumflex
/udieresis/dagger/degree/cent/sterling/section/bullet/paragraph/germandbls
/registered/copyright/trademark/acute/dieresis/.notdef/AE/Oslash
/.notdef/plusminus/.notdef/.notdef/yen/mu/.notdef/.notdef
/.notdef/.notdef/.notdef/ordfeminine/ordmasculine/.notdef/ae/oslash
/questiondown/exclamdown/logicalnot/.notdef/florin/.notdef/.notdef
/guillemotleft/guillemotright/ellipsis/.notdef/Agrave/Atilde/Otilde/OE/oe
/endash/emdash/quotedblleft/quotedblright/quoteleft/quoteright/divide
/.notdef/ydieresis/Ydieresis/fraction/currency/guilsinglleft/guilsinglright
/fi/fl/daggerdbl/periodcentered/quotesinglbase/quotedblbase/perthousand
/Acircumflex/Ecircumflex/Aacute/Edieresis/Egrave/Iacute/Icircumflex
/Idieresis/Igrave/Oacute/Ocircumflex/.notdef/Ograve/Uacute/Ucircumflex
/Ugrave/dotlessi/circumflex/tilde/macron/breve/dotaccent/ring/cedilla
/hungarumlaut/ogonek/caron
TE
%AI3_BeginEncoding: _Helvetica Helvetica
[39/quotesingle 96/grave 128/Adieresis/Aring/Ccedilla/Eacute/Ntilde/Odieresis
/Udieresis/aacute/agrave/acircumflex/adieresis/atilde/aring/ccedilla/eacute
/egrave/ecircumflex/edieresis/iacute/igrave/icircumflex/idieresis/ntilde
/oacute/ograve/ocircumflex/odieresis/otilde/uacute/ugrave/ucircumflex
/udieresis/dagger/degree/cent/sterling/section/bullet/paragraph/germandbls
/registered/copyright/trademark/acute/dieresis/.notdef/AE/Oslash
/.notdef/plusminus/.notdef/.notdef/yen/mu/.notdef/.notdef
/.notdef/.notdef/.notdef/ordfeminine/ordmasculine/.notdef/ae/oslash
/questiondown/exclamdown/logicalnot/.notdef/florin/.notdef/.notdef
/guillemotleft/guillemotright/ellipsis/.notdef/Agrave/Atilde/Otilde/OE/oe
/endash/emdash/quotedblleft/quotedblright/quoteleft/quoteright/divide
/.notdef/ydieresis/Ydieresis/fraction/currency/guilsinglleft/guilsinglright
/fi/fl/daggerdbl/periodcentered/quotesinglbase/quotedblbase/perthousand
/Acircumflex/Ecircumflex/Aacute/Edieresis/Egrave/Iacute/Icircumflex
/Idieresis/Igrave/Oacute/Ocircumflex/.notdef/Ograve/Uacute/Ucircumflex
/Ugrave/dotlessi/circumflex/tilde/macron/breve/dotaccent/ring/cedilla
/hungarumlaut/ogonek/caron
/_Helvetica/Helvetica 0 0 1 TZ
%AI3_EndEncoding AdobeType
%AI5_Begin_NonPrinting
Np
%AI3_BeginPattern: (Yellow Stripe)
(Yellow Stripe) 8.4499 4.6 80.4499 76.6 [
%AI3_Tile
(0 O 0 R 0 0.4 1 0 k 0 0.4 1 0 K) @
(
800 Ar
0 J 0 j 3.6 w 4 M []0 d
%AI3_Note:
0 D
8.1999 8.1999 m
80.6999 8.1999 L
S
8.1999 22.6 m
80.6999 22.6 L
S
8.1999 37.0001 m
80.6999 37.0001 L
S
8.1999 51.3999 m
80.6999 51.3999 L
S
8.1999 65.8 m
80.6999 65.8 L
S
8.1999 15.3999 m
80.6999 15.3999 L
S
8.1999 29.8 m
80.6999 29.8 L
S
8.1999 44.1999 m
80.6999 44.1999 L
S
8.1999 58.6 m
80.6999 58.6 L
S
8.1999 73.0001 m
80.6999 73.0001 L
S
) &
] E
%AI3_EndPattern
%AI5_End_NonPrinting--
%AI5_Begin_NonPrinting
Np
3 Bn
%AI5_BeginGradient: (Black & White)
(Black & White) 1 2 Bd
[
<
FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFEFEFEFEFEFEFEFEFEFEFEFEFEFEFE
FDFDFDFDFDFDFDFDFDFDFDFCFCFCFCFCFCFCFCFBFBFBFBFBFBFBFBFAFAFAFAFAFAF9F9F9F9F9F9F8
F8F8F8F8F8F7F7F7F7F7F6F6F6F6F6F5F5F5F5F5F4F4F4F4F3F3F3F3F2F2F2F2F1F1F1F1F0F0F0F0
EFEFEFEEEEEEEEEDEDEDECECECEBEBEBEBEAEAEAE9E9E9E8E8E8E7E7E7E6E6E5E5E5E4E4E4E3E3E3
E2E2E1E1E1E0E0DFDFDFDEDEDDDDDDDCDCDBDBDADADAD9D9D8D8D7D7D6D6D6D5D5D4D4D3D3D2D2D1
D1D0D0CFCFCECECDCDCCCCCBCBCACAC9C9C8C8C7C6C6C5C5C4C4C3C3C2C1C1C0C0BFBFBEBDBDBCBC
BBBABAB9B9B8B7B7B6B6B5B4B4B3B2B2B1B1B0AFAFAEADADACABABAAA9A9A8A7A7A6A5A5A4A3A2A2
A1A0A09F9E9D9D9C9B9B9A999898979695959493929191908F8E8E8D8C8B8A8A8988878686858483
828281807F7E7D7D7C7B7A7978777776757473727171706F6E6D6C6B6A6968686766656463626160
5F5E5D5C5B5B5A595857565554535251504F4E4D4C4B4A
>
0 %_Br
[
1 0 72 0 %_Bs
0.29 0 50 100 %_Bs
BD
%AI5_EndGradient
%AI5_BeginGradient: (Red & Yellow)
(Red & Yellow) 0 2 Bd
[
0
<
000102030405060708090A0B0C0D0E0F101112131415161718191A1B1C1D1E1F2021222324252627
28292A2B2C2D2E2F303132333435363738393A3B3C3D3E3F404142434445464748494A4B4C4D4E4F
505152535455565758595A5B5C5D5E5F606162636465666768696A6B6C6D6E6F7071727374757677
78797A7B7C7D7E7F808182838485868788898A8B8C8D8E8F909192939495969798999A9B9C9D9E9F
A0A1A2A3A4A5A6A7A8A9AAABACADAEAFB0B1B2B3B4B5B6B7B8B9BABBBCBDBEBFC0C1C2C3C4C5C6C7
C8C9CACBCCCDCECFD0D1D2D3D4D5D6D7D8D9DADBDCDDDEDFE0E1E2E3E4E5E6E7E8E9EAEBECEDEEEF
F0F1F2F3F4F5F6F7F8F9FAFBFCFDFEFF
>
<
FFFFFEFEFDFDFDFCFCFBFBFBFAFAF9F9F9F8F8F7F7F7F6F6F5F5F5F4F4F3F3F3F2F2F1F1F1F0F0EF
EFEFEEEEEDEDEDECECEBEBEBEAEAE9E9E9E8E8E7E7E7E6E6E5E5E5E4E4E3E3E3E2E2E1E1E1E0E0DF
DFDFDEDEDDDDDDDCDCDBDBDBDADAD9D9D9D8D8D7D7D7D6D6D5D5D5D4D4D3D3D3D2D2D1D1D1D0D0CF
CFCFCECECDCDCDCCCCCBCBCBCACAC9C9C9C8C8C7C7C7C6C6C5C5C5C4C4C3C3C3C2C2C1C1C1C0C0BF
BFBFBEBEBDBDBDBCBCBBBBBBBABAB9B9B9B8B8B7B7B7B6B6B5B5B5B4B4B3B3B3B2B2B1B1B1B0B0AF
AFAFAEAEADADADACACABABABAAAAA9A9A9A8A8A7A7A7A6A6A5A5A5A4A4A3A3A3A2A2A1A1A1A0A09F
9F9F9E9E9D9D9D9C9C9B9B9B9A9A9999
>
0
1 %_Br
[
0 1 0.6 0 1 50 100 %_Bs
0 0 1 0 1 50 0 %_Bs
BD
%AI5_EndGradient
%AI5_BeginGradient: (Yellow & Blue Radial)
(Yellow & Blue Radial) 1 2 Bd
[
<
000102030405060708090A0B0C0D0E0F101112131415161718191A1B1C1D1E1F2021222324252627
28292A2B2C2D2E2F303132333435363738393A3B3C3D3E3F404142434445464748494A4B4C4D4E4F
505152535455565758595A5B5C5D5E5F606162636465666768696A6B6C6D6E6F7071727374757677
78797A7B7C7D7E7F808182838485868788898A8B8C8D8E8F909192939495969798999A9B9C9D9E9F
A0A1A2A3A4A5A6A7A8A9AAABACADAEAFB0B1B2B3B4B5B6B7B8B9BABBBCBDBEBFC0C1C2C3C4C5C6C7
C8C9CACBCCCDCECFD0D1D2D3D4D5D6D7D8D9DADBDCDDDEDFE0E1E2E3E4E5E6E7E8E9EAEBECEDEEEF
F0F1F2F3F4F5F6F7F8F9FAFBFCFDFEFF
>
<
1415161718191A1B1C1D1E1F1F202122232425262728292A2A2B2C2D2E2F30313233343536363738
393A3B3C3D3E3F40414142434445464748494A4B4C4D4D4E4F50515253545556575858595A5B5C5D
5E5F60616263646465666768696A6B6C6D6E6F6F707172737475767778797A7B7B7C7D7E7F808182
83848586868788898A8B8C8D8E8F90919292939495969798999A9B9C9D9D9E9FA0A1A2A3A4A5A6A7
A8A9A9AAABACADAEAFB0B1B2B3B4B4B5B6B7B8B9BABBBCBDBEBFC0C0C1C2C3C4C5C6C7C8C9CACBCB
CCCDCECFD0D1D2D3D4D5D6D7D7D8D9DADBDCDDDEDFE0E1E2E2E3E4E5E6E7E8E9EAEBECEDEEEEEFF0
F1F2F3F4F5F6F7F8F9F9FAFBFCFDFEFF
>
<
ABAAAAA9A8A7A7A6A5A5A4A3A3A2A1A1A09F9F9E9D9D9C9B9B9A9999989797969595949393929191
908F8F8E8D8D8C8B8B8A8989888787868585848383828181807F7F7E7D7D7C7B7B7A797978777776
7575747373727171706F6F6E6D6D6C6B6B6A6969686767666565646362626160605F5E5E5D5C5C5B
5A5A5958585756565554545352525150504F4E4E4D4C4C4B4A4A4948484746464544444342424140
403F3E3E3D3C3C3B3A3A3938383736363534343332323130302F2E2E2D2C2C2B2A2A292828272626
25242423222121201F1F1E1D1D1C1B1B1A1919181717161515141313121111100F0F0E0D0D0C0B0B
0A090908070706050504030302010100
>
0
1 %_Br
[
0 0.08 0.67 0 1 50 14 %_Bs
1 1 0 0 1 50 100 %_Bs
BD
%AI5_EndGradient
%AI5_End_NonPrinting--
%AI5_BeginPalette
0 0 Pb
Pn
Pc
1 g
Pc
0 g
Pc
0 0 0 0 k
Pc
0.75 g
Pc
0.5 g
Pc
0.25 g
Pc
0 g
Pc
Bb
0 0 0 0 Bh
2 (Black & White) -4014 4716 0 0 1 0 0 1 0 0 Bg
0 BB
Pc
0.25 0 0 0 k
Pc
0.5 0 0 0 k
Pc
0.75 0 0 0 k
Pc
1 0 0 0 k
Pc
0.25 0.25 0 0 k
Pc
0.5 0.5 0 0 k
Pc
0.75 0.75 0 0 k
Pc
1 1 0 0 k
Pc
Bb
2 (Red & Yellow) -4014 4716 0 0 1 0 0 1 0 0 Bg
0 BB
Pc
0 0.25 0 0 k
Pc
0 0.5 0 0 k
Pc
0 0.75 0 0 k
Pc
0 1 0 0 k
Pc
0 0.25 0.25 0 k
Pc
0 0.5 0.5 0 k
Pc
0 0.75 0.75 0 k
Pc
0 1 1 0 k
Pc
Bb
0 0 0 0 Bh
2 (Yellow & Blue Radial) -4014 4716 0 0 1 0 0 1 0 0 Bg
0 BB
Pc
0 0 0.25 0 k
Pc
0 0 0.5 0 k
Pc
0 0 0.75 0 k
Pc
0 0 1 0 k
Pc
0.25 0 0.25 0 k
Pc
0.5 0 0.5 0 k
Pc
0.75 0 0.75 0 k
Pc
1 0 1 0 k
Pc
(Yellow Stripe) 0 0 1 1 0 0 0 0 0 [1 0 0 1 0 0] p
Pc
0.25 0.125 0 0 k
Pc
0.5 0.25 0 0 k
Pc
0.75 0.375 0 0 k
Pc
1 0.5 0 0 k
Pc
0.125 0.25 0 0 k
Pc
0.25 0.5 0 0 k
Pc
0.375 0.75 0 0 k
Pc
0.5 1 0 0 k
Pc
0 0 0 0 k
Pc
0 0.25 0.125 0 k
Pc
0 0.5 0.25 0 k
Pc
0 0.75 0.375 0 k
Pc
0 1 0.5 0 k
Pc
0 0.125 0.25 0 k
Pc
0 0.25 0.5 0 k
Pc
0 0.375 0.75 0 k
Pc
0 0.5 1 0 k
Pc
0 0 0 0 k
Pc
0.125 0 0.25 0 k
Pc
0.25 0 0.5 0 k
Pc
0.375 0 0.75 0 k
Pc
0.5 0 1 0 k
Pc
0.25 0 0.125 0 k
Pc
0.5 0 0.25 0 k
Pc
0.75 0 0.375 0 k
Pc
1 0 0.5 0 k
Pc
0 0 0 0 k
Pc
0.25 0.125 0.125 0 k
Pc
0.5 0.25 0.25 0 k
Pc
0.75 0.375 0.375 0 k
Pc
1 0.5 0.5 0 k
Pc
0.25 0.25 0.125 0 k
Pc
0.5 0.5 0.25 0 k
Pc
0.75 0.75 0.375 0 k
Pc
1 1 0.5 0 k
Pc
0 0 0 0 k
Pc
0.125 0.25 0.125 0 k
Pc
0.25 0.5 0.25 0 k
Pc
0.375 0.75 0.375 0 k
Pc
0.5 1 0.5 0 k
Pc
0.125 0.25 0.25 0 k
Pc
0.25 0.5 0.5 0 k
Pc
0.375 0.75 0.75 0 k
Pc
0.5 1 1 0 k
Pc
0 0 0 0 k
Pc
0.125 0.125 0.25 0 k
Pc
0.25 0.25 0.5 0 k
Pc
0.375 0.375 0.75 0 k
Pc
0.5 0.5 1 0 k
Pc
0.25 0.125 0.25 0 k
Pc
0.5 0.25 0.5 0 k
Pc
0.75 0.375 0.75 0 k
Pc
1 0.5 1 0 k
Pc
PB
%AI5_EndPalette
%AI5_BeginLayer
1 1 1 1 0 0 0 79 128 255 Lb
(Layer 1) Ln
0 A
1 Ap
0 O
0 g
0 R
0 0 0 0 K
800 Ar
0 J 0 j 2 w 4 M []0 d
%AI3_Note:
0 D
136 713.4853 m
138.3431 713.4853 140.2426 711.5858 140.2426 709.2426 c
140.2426 706.8995 138.3431 705 136 705 c
133.6569 705 131.7574 706.8995 131.7574 709.2426 c
131.7574 711.5858 133.6569 713.4853 136 713.4853 c
b
141.9375 600 m
144.2806 600 146.1801 598.1005 146.1801 595.7574 c
146.1801 593.4142 144.2806 591.5147 141.9375 591.5147 c
139.5944 591.5147 137.6949 593.4142 137.6949 595.7574 c
137.6949 598.1005 139.5944 600 141.9375 600 c
b
100.9375 598.4853 m
103.2806 598.4853 105.1801 596.5858 105.1801 594.2426 c
105.1801 591.8995 103.2806 590 100.9375 590 c
98.5944 590 96.6949 591.8995 96.6949 594.2426 c
96.6949 596.5858 98.5944 598.4853 100.9375 598.4853 c
b
57.9375 597.4853 m
60.2806 597.4853 62.1801 595.5858 62.1801 593.2426 c
62.1801 590.8995 60.2806 589 57.9375 589 c
55.5944 589 53.6949 590.8995 53.6949 593.2426 c
53.6949 595.5858 55.5944 597.4853 57.9375 597.4853 c
b
169.7574 656.2426 m
172.1005 656.2426 174 654.3431 174 652 c
174 649.6569 172.1005 647.7574 169.7574 647.7574 c
167.4142 647.7574 165.5147 649.6569 165.5147 652 c
165.5147 654.3431 167.4142 656.2426 169.7574 656.2426 c
b
98.8125 657.8676 m
101.1556 657.8676 103.0551 655.9681 103.0551 653.625 c
103.0551 651.2819 101.1556 649.3824 98.8125 649.3824 c
96.4694 649.3824 94.5699 651.2819 94.5699 653.625 c
94.5699 655.9681 96.4694 657.8676 98.8125 657.8676 c
b
303.25 713.9853 m
305.5931 713.9853 307.4926 712.0858 307.4926 709.7426 c
307.4926 707.3995 305.5931 705.5 303.25 705.5 c
300.9069 705.5 299.0074 707.3995 299.0074 709.7426 c
299.0074 712.0858 300.9069 713.9853 303.25 713.9853 c
b
308.75 599.5 m
311.0931 599.5 312.9926 597.6005 312.9926 595.2574 c
312.9926 592.9142 311.0931 591.0147 308.75 591.0147 c
306.4069 591.0147 304.5074 592.9142 304.5074 595.2574 c
304.5074 597.6005 306.4069 599.5 308.75 599.5 c
b
267.75 597.9853 m
270.0931 597.9853 271.9926 596.0858 271.9926 593.7426 c
271.9926 591.3995 270.0931 589.5 267.75 589.5 c
265.4069 589.5 263.5074 591.3995 263.5074 593.7426 c
263.5074 596.0858 265.4069 597.9853 267.75 597.9853 c
b
224.75 596.9853 m
227.0931 596.9853 228.9926 595.0858 228.9926 592.7426 c
228.9926 590.3995 227.0931 588.5 224.75 588.5 c
222.4069 588.5 220.5074 590.3995 220.5074 592.7426 c
220.5074 595.0858 222.4069 596.9853 224.75 596.9853 c
b
337.0074 656.7426 m
339.3505 656.7426 341.25 654.8431 341.25 652.5 c
341.25 650.1569 339.3505 648.2574 337.0074 648.2574 c
334.6642 648.2574 332.7647 650.1569 332.7647 652.5 c
332.7647 654.8431 334.6642 656.7426 337.0074 656.7426 c
b
266.0625 658.3676 m
268.4056 658.3676 270.3051 656.4681 270.3051 654.125 c
270.3051 651.7819 268.4056 649.8824 266.0625 649.8824 c
263.7194 649.8824 261.8199 651.7819 261.8199 654.125 c
261.8199 656.4681 263.7194 658.3676 266.0625 658.3676 c
b
u
0 Ap
0 G
1 w
132 706 m
103 662 l
S
0 O
0 g
103.2789 662.4226 m
105.3856 662.3456 l
105.386 662.2719 l
102.7953 660.4613 l
102.044 659.7306 101.2927 659 100.5415 658.2693 c
100.9167 659.2478 101.292 660.2263 101.6672 661.2048 c
102.3096 664.2996 l
102.369 664.3339 l
103.2789 662.4226 l
f
U
u
0 R
0 G
139 707 m
165 659 l
S
0 O
0 g
164.7604 659.4467 m
165.8227 661.2676 l
165.8879 661.2331 l
166.261 658.0945 l
166.5505 657.0872 166.84 656.08 167.1295 655.0728 c
166.444 655.8655 165.7586 656.6583 165.073 657.451 c
162.648 659.4782 l
162.6458 659.5468 l
164.7604 659.4467 l
f
U
u
0 R
0 G
94.4522 653 m
61.9375 602 l
S
0 O
0 g
62.2149 602.4283 m
64.3226 602.3834 l
64.3241 602.3096 l
61.7611 600.4599 l
61.0211 599.7179 60.281 598.9759 59.541 598.2339 c
59.9012 599.218 60.2616 600.2021 60.6219 601.1862 c
61.2171 604.2903 l
61.276 604.3256 l
62.2149 602.4283 l
f
U
u
0 R
0 G
98.6949 648.7574 m
99.9375 602 l
S
0 O
0 g
99.9272 602.5081 m
101.6988 603.6507 l
101.7414 603.5904 l
100.6531 600.623 l
100.4552 599.5938 100.2573 598.5647 100.0594 597.5355 c
99.8071 598.5527 99.5548 599.5699 99.3025 600.5871 c
98.058 603.4925 l
98.0871 603.5547 l
99.9272 602.5081 l
f
U
u
0 R
0 G
102.9375 653 m
137.9375 603 l
S
0 O
0 g
137.6501 603.4193 m
138.4977 605.3496 l
138.5664 605.3227 l
139.2952 602.2471 l
139.6977 601.2795 140.1002 600.3119 140.5027 599.3442 c
139.7312 600.0536 138.9598 600.763 138.1883 601.4723 c
135.5479 603.2097 l
135.5378 603.2776 l
137.6501 603.4193 l
f
U
u
0 R
0 G
298.25 705.5 m
269.25 659.5 l
B
269.5252 659.9297 m
271.6331 659.8955 l
271.635 659.8217 l
269.0814 657.959 l
268.3451 657.2133 267.6088 656.4675 266.8725 655.7218 c
267.2278 656.7077 267.5832 657.6936 267.9385 658.6795 c
268.518 661.7867 l
268.5768 661.8222 l
269.5252 659.9297 l
f
297.9797 705.0718 m
295.8719 705.1061 l
295.8701 705.1799 l
298.4236 707.0425 l
299.16 707.7882 299.8963 708.5339 300.6326 709.2796 c
300.2773 708.2937 299.9219 707.3078 299.5665 706.3219 c
298.9869 703.2148 l
298.9282 703.1793 l
297.9797 705.0718 l
f
U
u
0 R
0 G
270.3051 654.125 m
330.25 652.5 l
B
329.7402 652.5138 m
328.6942 654.3442 l
328.7567 654.3834 l
331.6615 653.1375 l
332.6785 652.8846 333.6955 652.6318 334.7126 652.379 c
333.6833 652.1816 332.6541 651.9843 331.6249 651.7869 c
328.6569 650.7002 l
328.5963 650.7326 l
329.7402 652.5138 l
f
U
u
0 R
0 G
261.75 647.5 m
227.75 599.5 l
B
228.0463 599.9112 m
230.1493 599.7636 l
230.1472 599.6899 l
227.4972 597.9672 l
226.7218 597.2622 225.9464 596.5571 225.1711 595.852 c
225.5789 596.8174 225.9868 597.7828 226.3946 598.7481 c
227.1405 601.8197 l
227.201 601.852 l
228.0463 599.9112 l
f
261.4537 647.0888 m
259.3507 647.2364 l
259.3528 647.3101 l
262.0028 649.0328 l
262.7782 649.7378 263.5536 650.4429 264.3289 651.148 c
263.9211 650.1826 263.5132 649.2172 263.1054 648.2518 c
262.3595 645.1803 l
262.299 645.148 l
261.4537 647.0888 l
f
U
u
0 R
0 G
228.9926 592.7426 m
260.75 593.5 l
B
260.2419 593.4911 m
259.1041 595.2658 l
259.1645 595.3082 l
262.129 594.2118 l
263.1576 594.011 264.1861 593.8104 265.2147 593.6097 c
264.1969 593.3601 263.179 593.1106 262.1612 592.8611 c
259.2523 591.6247 l
259.1902 591.6539 l
260.2419 593.4911 l
f
U
u
0 R
0 G
271.9926 593.7426 m
300.75 594.5 l
B
300.2387 594.4916 m
299.0964 596.2635 l
299.1567 596.306 l
302.1239 595.217 l
303.153 595.0188 304.1821 594.8207 305.2112 594.6226 c
304.194 594.3705 303.1767 594.1185 302.1595 593.8664 c
299.2537 592.6227 l
299.1916 592.6517 l
300.2387 594.4916 l
f
U
u
0 R
0 G
267.75 597.9853 m
265.75 645.5 l
B
265.7697 644.9872 m
264.016 643.8173 l
263.9725 643.8769 l
265.0147 646.8608 l
265.1967 647.8928 265.3786 648.9249 265.5605 649.957 c
265.8286 648.9439 266.0966 647.9307 266.3646 646.9176 c
267.6538 644.0318 l
267.6257 643.9692 l
265.7697 644.9872 l
f
U
u
0 R
0 G
308.75 599.5 m
271.75 646.5 l
B
272.0655 646.0993 m
271.3275 644.1245 l
271.2574 644.1475 l
270.3571 647.1772 l
269.901 648.1207 269.4448 649.0642 268.9886 650.0077 c
269.7987 649.3428 270.6087 648.6778 271.4187 648.013 c
274.1524 646.4266 l
274.1663 646.3594 l
272.0655 646.0993 l
f
U
u
0 R
0 G
337.0074 656.7426 m
307.25 704.5 l
B
307.5197 704.0672 m
306.57 702.1851 l
306.5028 702.2155 l
305.9396 705.3256 l
305.5895 706.3134 305.2393 707.3011 304.8892 708.2889 c
305.6216 707.5393 306.3539 706.7897 307.0863 706.0401 c
309.63 704.1641 l
309.6364 704.0957 l
307.5197 704.0672 l
f
U
0 To
1 0 0 1 287.6667 705.6667 0 Tp
TP
0 Tr
/_Helvetica 12 Tf
0 Ts
100 Tz
0 Tt
0 TA
%_ 0 XL
36 0 Xb
XB
0 0 5 TC
100 100 200 TW
0 0 0 Ti
0 Ta
0 0 2 2 3 Th
0 Tq
16.5 0 Tl
0 Tc
0 Tw
(A) Tx 
(\r) TX 
TO
0 To
1 0 0 1 250.6667 652.6667 0 Tp
TP
0 Tr
(B) Tx 
(\r) TX 
TO
0 To
1 0 0 1 333.3333 638 0 Tp
TP
0 Tr
(C) Tx 
(\r) TX 
TO
0 To
1 0 0 1 222.3333 579 0 Tp
TP
0 Tr
(D) Tx 
(\r) TX 
TO
0 To
1 0 0 1 264.3333 580 0 Tp
TP
0 Tr
(E) Tx 
(\r) TX 
TO
0 To
1 0 0 1 307 581.6667 0 Tp
TP
0 Tr
(F) Tx 
(\r) TX 
TO
0 To
1 0 0 1 438.6667 680.6667 0 Tp
TP
0 Tr
(A\r) Tx 
T*
(B\r) Tx 
T*
(D\r) Tx 
T*
(E\r) Tx 
T*
(F\r) Tx 
T*
(C\r) Tx 
T*
(\r) Tx 
T*
(\r) Tx 
TO
1 Ap
0 R
0 G
452 578.2917 m
452 693.3333 L
434.6667 693.3333 L
434.6667 578.2917 L
452 578.2917 L
s
0 Ap
434.6667 676.6667 m
452.1667 676.6667 l
S
434.6667 659.3333 m
S
451.8333 660 m
434.5 660 l
S
452 643.5 m
434.3333 643.5 l
S
452 627.3333 m
434.3333 627.3333 l
S
451.8333 610.5 m
434.5 610.5 l
S
434.5417 594.4375 m
451.7083 594.4375 l
S
u
0.5 w
452.8333 684.5 m
498.1667 684.5 492.125 582.0833 453.7917 582.0833 c
S
0 O
0 g
1 w
453.9957 582.0833 m
454.4337 581.3628 l
454.4092 581.3464 l
453.2342 581.8131 l
452.8248 581.9032 452.4154 581.9933 452.006 582.0833 c
452.4154 582.1734 452.8248 582.2635 453.2342 582.3535 c
454.4092 582.8202 l
454.4337 582.8079 l
453.9957 582.0833 l
f
U
0 To
1 0 0 1 444.5 585 0 Tp
TP
0 Tr
0 O
(\r) Tx 
TO
u
0 R
0 G
0.5 w
453 669 m
472.5 669 475.5 601.5 453.5 601.5 c
S
0 O
0 g
1 w
453.704 601.5 m
454.142 600.7795 l
454.1175 600.7631 l
452.9425 601.2298 l
452.5331 601.3199 452.1237 601.4099 451.7143 601.5 c
452.1237 601.5901 452.5331 601.6801 452.9425 601.7702 c
454.1175 602.2369 l
454.142 602.2246 l
453.704 601.5 l
f
U
u
0 R
0 G
0.5 w
453 652 m
459.5 652 462 638 453.5 638 c
S
0 O
0 g
1 w
453.704 638 m
454.142 637.2795 l
454.1175 637.2631 l
452.9425 637.7298 l
452.5331 637.8199 452.1237 637.9099 451.7143 638 c
452.1237 638.0901 452.5331 638.1801 452.9425 638.2702 c
454.1175 638.7369 l
454.142 638.7246 l
453.704 638 l
f
U
u
0 R
0 G
0.5 w
452.875 634.75 m
459.375 634.75 461.875 620.75 453.375 620.75 c
S
0 O
0 g
1 w
453.579 620.75 m
454.017 620.0295 l
453.9925 620.0131 l
452.8175 620.4798 l
452.4081 620.5699 451.9987 620.6599 451.5893 620.75 c
451.9987 620.8401 452.4081 620.9301 452.8175 621.0202 c
453.9925 621.4869 l
454.017 621.4746 l
453.579 620.75 l
f
U
u
0 R
0 G
0.5 w
453.375 619 m
459.875 619 462.375 605 453.875 605 c
S
0 O
0 g
1 w
454.079 605 m
454.517 604.2795 l
454.4925 604.2631 l
453.3175 604.7298 l
452.9081 604.8199 452.4987 604.9099 452.0893 605 c
452.4987 605.0901 452.9081 605.1801 453.3175 605.2702 c
454.4925 605.7369 l
454.517 605.7246 l
454.079 605 l
f
U
u
0 R
0 G
0.5 w
453.25 598.1875 m
459.75 598.1875 462.25 584.1875 453.75 584.1875 c
S
0 O
0 g
1 w
453.954 584.1875 m
454.392 583.467 l
454.3675 583.4506 l
453.1925 583.9173 l
452.7831 584.0074 452.3737 584.0974 451.9643 584.1875 c
452.3737 584.2776 452.7831 584.3676 453.1925 584.4577 c
454.3675 584.9244 l
454.392 584.9121 l
453.954 584.1875 l
f
U
0 To
1 0 0 1 119 705 0 Tp
TP
0 Tr
0 O
(A) Tx 
(\r) TX 
TO
0 To
1 0 0 1 82 652 0 Tp
TP
0 Tr
(B) Tx 
(\r) TX 
TO
0 To
1 0 0 1 164.6667 637.3333 0 Tp
TP
0 Tr
(C) Tx 
(\r) TX 
TO
0 To
1 0 0 1 53.6667 578.3333 0 Tp
TP
0 Tr
(D) Tx 
(\r) TX 
TO
0 To
1 0 0 1 95.6667 579.3333 0 Tp
TP
0 Tr
(E) Tx 
(\r) TX 
TO
0 To
1 0 0 1 138.3333 581 0 Tp
TP
0 Tr
(F) Tx 
(\r) TX 
TO
LB
%AI5_EndLayer--
gsave annotatepage grestore showpage
Adobe_IllustratorA_AI5 /terminate get exec
Adobe_typography_AI5 /terminate get exec
Adobe_level2_AI5 /terminate get exec
%%EndDocument
 @endspecial 348 857 a Fm(Figure)20 b(3:)30 b(Three)20
b(dif)o(ferent)e(representations)g(for)i(a)g(tree.)35
b(\(a\))20 b(Children)f(pointers.)35 b(\(b\))20 b(Left)348
925 y(child,)14 b(right)f(sibling,)g(parent)g(pointers.)k(\(c\))c
(Array)g(in)h(depth-\002rst)f(order)h(with)f(skip)g(pointers.)348
1105 y(of)18 b(the)f(commonly)g(needed)h(intersection)e(information,)h
(such)g(as)h(intersection)e(point,)i(surf)o(ace)348 1173
y(normal,)c(uv)g(coordinates,)f(or)g(e)o(xact)h(object)f(hit.)k
(Additionally)l(,)c(the)g(tra)o(v)o(ersal)g(of)h(the)f(ef)o(\002cienc)o
(y)348 1240 y(structure)h(can)h(be)h(terminated)d(immediately)g(once)j
(an)f(intersection)e(is)i(guaranteed.)21 b(A)14 b(special)348
1308 y(shado)o(w)j(routine)g(taking)g(these)g(f)o(actors)g(into)f
(account)i(can)f(mak)o(e)h(a)f(signi\002cant)g(dif)o(ference)f(in)348
1375 y(ef)o(\002cienc)o(y)l(.)433 1443 y(The)d(dif)o(ference)e(between)
h(shado)o(w)g(rays)g(and)h(intersection)e(rays)i(determined)e(which)h
(accel-)348 1510 y(eration)j(scheme)g(I)h(use.)22 b(I)16
b(ha)o(v)o(e)g(tried)e(both)i(grids)f([4])g(and)h(bounding)g(v)o(olume)
g(hierarchies.)21 b(In)348 1577 y(my)14 b(e)o(xperience)g(\(based)g(on)
g(models)g(I)f(typically)g(render\))h(grids)f(are)h(a)g(little)e(f)o
(aster)i(on)g(intersec-)348 1645 y(tion)g(rays)f(\(closest)g(hit\))g
(and)h(slo)o(wer)e(for)h(shado)o(w)g(rays)h(\(an)o(y)g(hit\).)i(Grids)d
(sort)g(the)h(en)n(vironment)348 1712 y(spatially)l(,)h(which)h(is)f
(good)h(for)g(\002nding)g(the)f(closest)g(intersection.)21
b(The)c(bounding)f(v)o(olume)f(hi-)348 1780 y(erarchies)e(b)o(uilt)f
(by)i(trying)e(to)i(minimize)e(Goldsmith)f(and)j(Salmon')m(s)f(cost)g
(function)f([6])h(tend)h(to)348 1847 y(k)o(eep)h(lar)o(ger)e(primiti)o
(v)o(es)e(near)j(the)g(root,)f(which)g(is)h(good)g(for)g(shado)o(w)f
(rays.)k(It)c(is)g(still)g(unkno)o(wn)348 1914 y(as)g(to)f(which)g
(acceleration)f(scheme)h(is)g(better)n(,)g(and)h(it)f(is)g(almost)f
(certainly)g(based)i(on)g(the)f(model.)348 2075 y Fi(4.3)67
b(T)-5 b(ra)n(v)o(ersal)16 b(Code)348 2181 y Fm(Casting)d(a)g(ray)g
(against)f(a)i(bounding)f(v)o(olume)g(hierarchy)f(requires)g(tra)o(v)o
(ersing)g(the)h(hierarchy)l(.)j(If)348 2248 y(a)d(ray)f(hits)f(a)h
(bounding)h(v)o(olume,)f(then)g(the)g(ray)g(is)g(check)o(ed)h(against)e
(the)h(children)f(of)h(the)g(bound-)348 2315 y(ing)18
b(v)o(olume.)28 b(If)17 b(the)h(bounding)g(v)o(olume)f(is)h(a)f(leaf,)h
(then)g(it)f(has)h(an)g(object)f(inside)g(it,)h(and)g(the)348
2383 y(object)12 b(is)f(check)o(ed.)18 b(This)12 b(is)f(done)i(in)e
(depth-\002rst)g(order)m(.)17 b(Once)11 b(bounding)i(v)o(olume)e
(intersection)348 2450 y(tests)16 b(are)h(as)h(f)o(ast)e(as)h(the)o(y)h
(can)f(be,)h(the)f(ne)o(xt)g(place)g(for)g(impro)o(v)o(ement)f(is)h
(the)g(tra)o(v)o(ersal)f(of)h(the)348 2518 y(hierarchy)l(.)g(T)n(ra)o
(v)o(ersal)c(code)h(for)g(shado)o(w)f(rays)h(will)e(be)i(used)g(in)g
(the)g(follo)o(wing)e(discussion.)433 2585 y(In)f(1991,)h(Haines[7)o(])
f(published)g(some)h(techniques)e(for)h(better)g(tra)o(v)o(ersals.)k
(Se)o(v)o(eral)c(of)g(these)348 2652 y(techniques)16
b(used)h(e)o(xtra)f(kno)o(wledge)g(to)g(mark)g(bounding)h(box)o(es)g
(as)f(automatically)f(hit)h(and)h(to)348 2720 y(change)e(the)f(order)g
(of)g(tra)o(v)o(ersal.)j(In)d(my)g(e)o(xperience)g(these)g(methods)g
(do)h(not)f(speed)g(up)h(the)f(ray)348 2787 y(tracer)j(and)g(greatly)g
(increase)f(the)i(comple)o(xity)e(of)h(the)h(code.)28
b(This)17 b(dif)o(ference)f(in)h(e)o(xperience)348 2855
y(may)j(be)g(due)f(to)h(changes)g(in)f(architecture)f(o)o(v)o(er)i(the)
f(last)g(8)h(years)f(that)g(mak)o(e)h(branches)f(and)348
2922 y(memory)c(accesses)g(instead)g(of)h(\003oating)f(point)g(the)h
(bottleneck.)21 b(It)15 b(may)h(also)f(be)h(due)g(to)f(f)o(aster)348
2990 y(bounding)f(box)f(tests.)j(I)d(ha)o(v)o(e)h(found)f(that)g(the)g
(best)f(w)o(ay)i(to)f(mak)o(e)g(the)g(tra)o(v)o(ersal)f(f)o(ast)h(is)f
(to)h(mak)o(e)348 3057 y(it)h(as)f(minimal)g(as)h(possible.)433
3124 y(The)h(simplest)e(tra)o(v)o(ersal)g(code)h(is)g(to)h(use)f
(recursion)g(to)g(tra)o(v)o(erse)g(the)g(tree)g(in)g(depth-\002rst)g
(or)o(-)348 3192 y(der)m(.)j(Figure)27 b(3\(a\))13 b(sho)o(ws)f(a)h
(hierarchy)g(of)g(bounding)g(box)o(es.)18 b(Depth)13
b(\002rst)f(tra)o(v)o(ersal)g(means)h(that)348 3259 y(bounding)i(box)h
(A)e(is)g(tested,)g(then)h(box)g(B,)g(then)g(the)g(box)o(es)g(with)e
(primiti)o(v)o(es)g(D,)h(E,)h(and)g(F)l(.)g(The)348 3327
y(idea)h(is)f(to)g(\002nd)h(an)g(intersection)e(as)h(soon)h(as)g
(possible)f(by)g(tra)o(v)o(eling)g(do)o(wn)g(into)g(the)g(tree.)22
b(The)1303 3556 y(6)p eop
%%Page: 7 7
7 6 bop 404 336 a Fh(T)l(r)o(eeShado)o(wT)l(ra)o(v)o(ersal\(ray)m(,)15
b(b)o(vNode\))461 404 y(while)p Fm(\()p Fh(true)p Fm(\))113
b Fg(//)14 b(termination)e(occur)o(s)i(when)h(bvNode)p
Fj(!)q Fg(GetP)l(ar)n(ent\(\))d(is)h(NULL)517 471 y Fh(if)p
Fm(\(b)o(vNode)p Fj(!)o Fm(Intersect\(ray\)\))573 539
y Fh(if)p Fm(\(b)o(vNode)p Fj(!)o Fm(HasPrimiti)o(v)o(e\(\)\))629
606 y Fh(if)p Fm(\(b)o(vNode)p Fj(!)o Fm(Primiti)o(v)o
(e\(\).Intersect\(ray\))o(\))685 674 y Fh(r)o(etur)o(n)i(true)573
741 y(else)629 808 y Fm(b)o(vNode)f(=)g(b)o(vNode)p Fj(!)p
Fm(GetLeftChild\(\))629 876 y Fh(continue)517 943 y(while)p
Fm(\()p Fh(true)p Fm(\))573 1011 y Fh(if)p Fm(\(b)o(vNode)p
Fj(!)o Fm(GetRightSibling\(\))e(!=)h(NULL\))629 1078
y(b)o(vNode)h(=)g(b)o(vNode)p Fj(!)p Fm(GetRightSibling\(\))629
1145 y Fh(br)o(eak)573 1213 y Fm(b)o(vNode)g(=)g(b)o(vNode)p
Fj(!)p Fm(GetP)o(arent\(\))573 1280 y Fh(if)p Fm(\(b)o(vNode)f(==)h
(NULL\))629 1348 y Fh(r)o(etur)o(n)g(false)348 1471 y
Fm(Figure)e(4:)k(T)n(ra)o(v)o(ersal)c(of)g(bounding)h(v)o(olume)e(tree)
h(using)g(left)f(child,)h(right)f(sibling,)h(parent)g(struc-)348
1539 y(ture.)348 1708 y(biggest)j(problem)f(with)g(this)g(is)g(the)h
(function)f(call)g(o)o(v)o(erhead.)20 b(The)c(compiler)d(maintains)h
(much)348 1775 y(more)g(state)f(information)f(than)i(we)g(need)g(here.)
k(W)l(e)13 b(can)h(eliminate)f(much)h(of)g(this)f(o)o(v)o(erhead)h(by)
348 1843 y(changing)g(our)f(representation)e(of)i(the)g(tree.)k(A)12
b(representation)g(that)h(w)o(orks)g(well)f(is)g(to)h(store)g(the)348
1910 y(left-most)i(child,)h(the)g(right)f(sibling,)h(and)h(the)f
(parent)g(for)g(each)g(node,)h(as)f(in)g(Figure)33 b(3.)24
b(Using)348 1978 y(this)11 b(representation)e(we)i(can)g(get)g(rid)g
(of)g(the)g(recursion)f(by)i(follo)o(wing)d(the)i(appropriate)f
(pointers.)348 2045 y(If)k(the)f(ray)h(intersects)e(the)i(bounding)g
(box,)g(we)g(get)f(to)h(its)f(children)g(by)h(follo)o(wing)e(the)i
(left-most)348 2112 y(child)f(link.)j(If)d(the)g(ray)g(misses,)f(we)h
(get)g(to)g(the)f(ne)o(xt)i(node)f(by)g(follo)o(wing)f(the)g(right)h
(sibling)f(link.)348 2180 y(If)j(the)g(right)g(sibling)g(is)g(empty)l
(,)g(we)g(mo)o(v)o(e)h(up)g(until)e(either)h(there)f(is)h(a)h(right)f
(sibling,)f(or)i(we)f(get)348 2247 y(back)f(up)h(to)e(the)h(root,)g(as)
g(sho)o(wn)f(in)h(pseudocode)g(in)g(Figure)f(4.)433 2315
y(This)18 b(tree)f(tra)o(v)o(ersal)g(also)g(does)h(too)g(much)g(w)o
(ork.)30 b(Notice)17 b(that)g(when)h(the)g(tra)o(v)o(ersal)e(is)i(at)
348 2382 y(a)i(leaf)g(or)f(when)h(the)g(ray)g(misses)e(a)i(bounding)h
(v)o(olume,)g(we)e(compute)h(the)f(ne)o(xt)h(node.)36
b(The)348 2449 y(ne)o(xt)16 b(node)f(is)g(al)o(w)o(ays)h(the)f(same,)g
(there)g(is)g(no)g(reason)g(to)h(be)f(computing)g(it)g(for)g(each)g
(tra)o(v)o(ersal.)348 2517 y(W)l(e)i(can)g(pre-compute)e(the)i(node)g
(we)f(go)h(to)g(when)g(we)f(skip)g(this)h(subtree)f(and)h(store)f(this)
g(skip)348 2584 y(node)g(in)f(each)g(node.)22 b(This)16
b(step)f(eliminates)e(all)h(computation)h(of)g(tra)o(v)o(ersal)f
(related)g(data)h(from)348 2652 y(the)j(tra)o(v)o(ersal.)30
b(There)18 b(are)g(still)f(intersection)g(computations,)h(b)o(ut)g(no)h
(e)o(xtra)f(computation)f(for)348 2719 y(determining)c(where)g(to)h
(go.)k(This)13 b(is)h(e)o(xpressed)g(in)f(pseudocode)i(in)e(Figure)h(5)
433 2786 y(The)g(\002nal)h(optimization)d(is)i(the)g(recognition)f
(that)h(we)g(only)g(need)h(to)f(do)g(depth-\002rst)g(tra)o(v)o(er)o(-)
348 2854 y(sals)k(on)h(the)f(tree)g(once)h(it)f(is)g(b)o(uilt.)30
b(This)18 b(observ)o(ation)g(lets)f(us)i(store)f(the)g(tree)g(in)g(an)h
(array)f(in)348 2921 y(depth-\002rst)12 b(order)h(as)f(in)h(Figure)26
b(3.)17 b(If)12 b(the)h(bounding)g(v)o(olume)f(is)h(intersected,)e(the)
i(ne)o(xt)g(node)g(to)348 2989 y(try)f(is)g(the)g(ne)o(xt)g(node)h(in)f
(the)g(array)l(.)17 b(If)12 b(the)g(bounding)g(v)o(olume)g(is)g
(missed,)g(the)g(ne)o(xt)g(node)h(can)f(be)348 3056 y(found)i(through)f
(the)g(skip)h(mechanism.)i(W)l(e)d(ha)o(v)o(e)g(ef)o(fecti)o(v)o(ely)f
(thro)o(wn)g(out)h(all)g(the)g(information)348 3124 y(we)g(don')o(t)f
(need)h(out)g(of)g(the)g(tree,)f(although)h(it)f(is)h(still)e(possible)
h(to)h(reconstruct)e(it.)17 b(The)c(tra)o(v)o(ersal)348
3191 y(code)h(can)g(be)h(seen)e(in)h(Figure)g(6.)433
3258 y(The)i(array)g(tra)o(v)o(ersal)e(approach)i(w)o(orks)g
(signi\002cantly)f(better)g(than)h(the)f(pre)o(vious)h(one,)g(and)348
3326 y(has)i(a)h(couple)f(subtle)f(adv)o(antages.)30
b(The)18 b(\002rst)g(is)g(better)f(memory)g(usage.)30
b(In)18 b(addition)g(to)g(the)1303 3556 y(7)p eop
%%Page: 8 8
8 7 bop 404 336 a Fh(SkipT)l(r)o(eeShado)o(wT)l(ra)o(v)o(ersal)p
Fm(\(ray)l(,)16 b(b)o(vNode\))461 404 y Fh(while)p Fm(\(b)o(vNode)c(!=)
i(NULL\))517 471 y Fh(if)p Fm(\(b)o(vNode)p Fj(!)o Fm
(Intersect\(ray\)\))573 539 y Fh(if)p Fm(\(b)o(vNode)p
Fj(!)o Fm(HasPrimiti)o(v)o(e\(\)\))629 606 y Fh(if)p
Fm(\(b)o(vNode)p Fj(!)o Fm(Primiti)o(v)o(e\(\).Intersect\(ray\))o(\))
685 674 y Fh(r)o(etur)o(n)h(true)629 741 y Fm(b)o(vNode)f(=)g(b)o
(vNode)p Fj(!)p Fm(SkipNode\(\))573 808 y Fh(else)629
876 y Fm(b)o(vNode)g(=)g(b)o(vNode)p Fj(!)p Fm(GetLeftChild\(\))517
943 y Fh(else)573 1011 y Fm(b)o(vNode)g(=)g(b)o(vNode)p
Fj(!)p Fm(SkipNode\(\))461 1078 y Fh(r)o(etur)o(n)g(false)430
1202 y Fm(Figure)g(5:)j(T)n(ra)o(v)o(ersal)c(of)h(bounding)h(v)o(olume)
e(tree)g(using)h(left)f(child,)g(and)i(skip)e(pointers.)404
1320 y Fh(ArrayShado)o(wT)l(ra)o(v)o(ersal)p Fm(\(ray)l(,)i(b)o
(vNode\))461 1387 y(stopNode)e(=)h(b)o(vNode)p Fj(!)p
Fm(GetSkipNode\(\))461 1455 y Fh(while)p Fm(\(b)o(vNode)e
Ff(<)i Fm(stopNode\))517 1522 y Fh(if)p Fm(\(b)o(vNode)p
Fj(!)o Fm(Intersect\(ray\)\))573 1590 y Fh(if)p Fm(\(b)o(vNode)p
Fj(!)o Fm(HasPrimiti)o(v)o(e\(\)\))629 1657 y Fh(if)p
Fm(\(b)o(vNode)p Fj(!)o Fm(Primiti)o(v)o(e\(\).Intersect\(ray\))o(\))
685 1724 y Fh(r)o(etur)o(n)h(true)573 1792 y Fm(b)o(vNode++)517
1859 y Fh(else)573 1927 y Fm(b)o(vNode)f(=)g(b)o(vNode)p
Fj(!)p Fm(GetSkipNode\(\))461 1994 y Fh(r)o(etur)o(n)g(false)391
2118 y Fm(Figure)g(6:)j(T)n(ra)o(v)o(ersal)d(of)f(bounding)i(v)o(olume)
e(tree)g(stored)h(as)g(an)g(array)f(in)h(depth-\002rst)f(order)m(.)348
2298 y(bounding)18 b(v)o(olume,)g(this)f(method)g(requires)g(only)h(a)f
(pointer)g(to)g(a)h(primiti)o(v)o(e)d(and)j(a)g(pointer)f(to)348
2366 y(the)h(skip)g(node.)31 b(This)18 b(is)g(v)o(ery)g(minimal.)29
b(Since)18 b(the)g(nodes)g(are)g(arranged)g(in)g(the)g(order)g(the)o(y)
348 2433 y(will)i(be)i(accessed)f(in,)i(there)e(is)g(more)g(memory)g
(coherenc)o(y)h(for)f(lar)o(ge)f(en)n(vironments.)39
b(The)348 2501 y(second)16 b(adv)o(antage)f(is)g(that)h(this)e(method)i
(requires)e(cop)o(ying)j(data)e(from)g(the)h(original)e(tree)h(into)348
2568 y(an)j(array)l(.)28 b(Since)17 b(the)g(original)g(tree)f(is)h
(going)h(to)f(be)h(thro)o(wn)e(out,)j(it)d(can)i(be)f(augmented)h(with)
348 2635 y(e)o(xtra)d(information.)20 b(Depending)15
b(upon)g(ho)o(w)g(the)g(tree)g(is)g(created,)f(this)h(e)o(xtra)g
(information)e(can)348 2703 y(more)i(than)g(double)g(the)g(cost)g(of)g
(each)h(node.)21 b(No)o(w)14 b(there)h(is)g(no)g(penalty)g(for)g(this)f
(information.)348 2770 y(Storing)d(the)g(e)o(xtra)g(information)f(can)i
(reduce)f(the)g(time)g(to)g(b)o(uild)g(the)g(tree)g(and)g(more)g
(importantly)348 2838 y(can)j(result)e(in)h(better)f(trees.)17
b(The)d(f)o(astest)e(bounding)i(v)o(olume)e(test)h(is)g(the)g(one)g
(you)h(don')o(t)f(ha)o(v)o(e)h(to)348 2905 y(do.)348
3066 y Fi(4.4)67 b(Caching)17 b(Objects)348 3171 y Fm(One)g(common)g
(optimization)e(is)i(the)g(use)g(of)g(caches)g(for)g(the)g(object)f
(most)h(recently)f(hit.)27 b(This)348 3239 y(optimization)11
b(and)i(v)o(ariations)e(on)i(it)e(were)h(discussed)g(by)h(Haines[7)o
(].)k(The)c(idea)f(is)g(that)g(the)h(ne)o(xt)348 3306
y(ray)19 b(cast)g(will)e(be)i(similar)e(to)i(the)g(current)f(ray)l(,)i
(so)f(k)o(eep)h(the)f(intersected)e(object)h(around)h(and)348
3373 y(check)c(it)f(\002rst)g(the)g(ne)o(xt)g(time.)k(T)l(o)d(the)f(e)o
(xtent)g(that)g(this)g(is)g(true,)g(caches)g(can)h(pro)o(vide)f(a)g
(bene\002t,)1303 3556 y(8)p eop
%%Page: 9 9
9 8 bop 348 354 a Fm(ho)o(we)o(v)o(er)13 b(rays)h(often)g(dif)o(fer)f
(wildly)l(.)k(Also,)d(cache)g(ef)o(fecti)o(v)o(eness)e(decreases)i(as)g
(the)g(size)g(of)g(the)348 421 y(primiti)o(v)o(es)f(get)i(smaller)m(.)k
(The)c(realism)f(of)g(man)o(y)h(types)g(of)g(models)f(is)h(increased)f
(by)h(replacing)348 489 y(single)d(surf)o(aces)h(with)f(man)o(y)h(surf)
o(aces.)j(No)o(w)c(caches)h(will)e(remain)h(v)o(alid)g(for)g(a)h
(shorter)f(amount)348 556 y(of)i(time.)433 624 y(There)f(are)h(tw)o(o)f
(dif)o(ferent)f(types)h(of)h(caches,)f(those)h(for)f(intersection)f
(\(closest)g(hit\))h(rays)g(and)348 691 y(those)f(for)f(shado)o(w)g
(\(an)o(y)h(hit\))e(rays.)17 b(If)11 b(caches)g(are)h(used)f(for)g
(intersection)f(rays,)i(the)g(ray)f(will)f(still)348
758 y(need)16 b(to)g(be)g(check)o(ed)g(against)f(the)h(en)n(vironment)e
(to)i(see)f(if)h(another)f(object)g(is)h(closer)m(.)22
b(Usually)348 826 y(the)c(ray)f(will)f(again)h(be)h(check)o(ed)g
(against)f(whate)o(v)o(er)f(object)h(is)h(in)f(the)g(cache.)29
b(Mailbox)o(es)17 b([1])348 893 y(can)i(eliminate)d(this)h(second)i
(check)f(\(by)g(marking)g(each)g(tested)f(object)h(with)f(a)h(unique)h
(ray)f(id)348 961 y(and)k(then)f(checking)h(the)f(id)h(before)f
(testing)f(the)i(primiti)o(v)o(e\).)37 b(Mailbox)o(es,)23
b(ho)o(we)o(v)o(er)n(,)f(create)348 1028 y(problems)15
b(when)g(making)g(a)h(parallel)e(v)o(ersion)h(of)g(the)g(code.)22
b(Depending)15 b(on)h(the)f(en)n(vironment)348 1095 y(and)d(the)f(a)o
(v)o(erage)g(number)g(of)g(possible)g(hits)f(per)h(ray)l(,)h(the)f
(cache)h(may)f(reduce)g(the)g(amount)g(of)g(the)348 1163
y(en)n(vironment)j(that)f(must)h(be)h(check)o(ed)g(by)g(shortening)f
(the)g(ray)g(length.)19 b(In)14 b(my)h(e)o(xperience,)f(the)348
1230 y(cost)i(of)h(maintaining)e(the)h(cache)g(and)h(the)f(double)h
(intersection)d(against)i(an)g(object)g(in)g(it)g(more)348
1298 y(than)d(outweighs)f(the)h(bene\002t)g(of)g(ha)o(ving)g(a)g
(cache.)k(If)12 b(your)h(primiti)o(v)o(es)e(are)i(v)o(ery)g(e)o(xpensi)
o(v)o(e)f(and)348 1365 y(your)18 b(en)n(vironments)f(are)g(dense,)i
(the)e(bene\002t)h(of)g(reducing)f(the)h(length)f(of)g(the)h(ray)g
(early)f(may)348 1433 y(outweigh)c(the)h(costs,)g(b)o(ut)f(it)h(is)f(w)
o(orth)h(checking)f(carefully)l(.)433 1500 y(Ev)o(aluating)19
b(the)h(bene\002t)g(of)g(caches)f(for)h(shado)o(w)g(rays)f(is)h(more)g
(complicated.)34 b(In)20 b(cases)348 1567 y(where)15
b(there)h(is)f(a)h(single)f(light,)g(there)g(tends)h(to)g(be)f(a)h
(speedup)g(as)g(long)g(as)f(the)h(cache)g(remains)348
1635 y(full)f(much)h(of)g(the)g(time)f(and)i(the)e(objects)h(in)f(it)h
(stay)g(there)f(for)h(a)g(long)g(enough)g(time.)23 b(In)16
b(cases)348 1702 y(where)f(there)f(are)h(multiple)e(lights)h(we)g
(often)h(lose)f(shado)o(w)h(ray)f(coherence)h(because)g(the)g(lights)
348 1770 y(are)22 b(in)h(dif)o(ferent)d(re)o(gions)i(of)g(the)h(en)n
(vironment.)41 b(No)o(w)21 b(each)i(shado)o(w)e(ray)i(is)f
(signi\002cantly)348 1837 y(dif)o(ferent)c(from)i(the)g(pre)o(vious)f
(one.)35 b(A)20 b(solution)f(for)h(this)f(is)h(to)g(ha)o(v)o(e)g(a)g
(dif)o(ferent)e(cache)i(for)348 1904 y(each)14 b(light.)433
1972 y(F)o(or)f(both)g(types)f(of)h(caches,)g(we)g(ha)o(v)o(e)g
(ignored)g(what)f(happens)h(for)g(re\003ected)f(and)i(transmit-)348
2039 y(ted)f(rays.)j(These)d(rays)g(are)f(spatially)f(v)o(ery)i(dif)o
(ferent)e(from)h(primary)g(rays)g(and)h(from)f(each)h(other)m(.)348
2107 y(Each)i(additional)d(bounce)j(mak)o(es)f(the)f(problem)h(much)f
(w)o(orse.)k(If)d(rays)f(are)h(allo)o(wed)e(to)i(bounce)348
2174 y Ff(d)j Fm(times,)f(there)g(are)g Fd(2)789 2154
y Fe(d)p Fc(+1)886 2174 y Fj(\000)e Fd(1)j Fm(dif)o(ferent)d(nodes)j
(in)f(the)g(ray)h(tree.)24 b(In)16 b(order)g(for)g(caching)g(to)g(be)
348 2242 y(useful,)g(a)g(separate)e(cache)i(needs)g(to)f(be)h
(associated)f(with)g(each)g(node.)23 b(F)o(or)16 b(shado)o(w)f(rays,)h
(that)348 2309 y(means)i(a)g(separate)f(cache)g(for)h(each)g(light)f
(at)g(each)h(node)g(This)g(can)g(increase)f(the)g(comple)o(xity)348
2376 y(of)e(the)h(code)f(signi\002cantly)l(.)21 b(Another)14
b(option)h(is)g(to)g(store)g(a)g(cache)g(for)g(each)g(light)g(on)g
(each)h(ob-)348 2444 y(ject)f(\(or)f(collection)g(of)h(objects\))f(in)h
(the)g(en)n(vironment)f(as)h(discussed)g(by)g(Haines[7)o(].)21
b(Note)14 b(that)348 2511 y(caching)g(only)g(helps)g(when)g(there)f(is)
h(an)g(object)f(in)h(the)g(cache.)k(If)13 b(most)g(shado)o(w)h(rays)g
(w)o(on')o(t)f(hit)348 2579 y(an)o(ything)18 b(\(due)g(to)f(the)h
(model)f(or)h(the)f(type)h(of)f(algorithm)g(using)g(the)h(shado)o(w)f
(tests\))f(then)i(the)348 2646 y(cache)g(is)e(less)h(lik)o(ely)g(to)g
(be)g(bene\002cial.)27 b(In)18 b(my)f(e)o(xperience,)h(shado)o(w)e
(caching)h(w)o(asn')o(t)g(a)g(sig-)348 2713 y(ni\002cant)g(enough)g
(gain,)g(so)f(I)h(opted)g(for)f(simplicity)e(of)j(code)g(and)g(remo)o
(v)o(ed)f(it,)h(although)g(after)348 2781 y(generating)d(the)f(data)h
(for)g(the)g(result)f(section)g(I)h(am)g(considering)f(putting)g(it)h
(back)g(in)g(for)g(certain)348 2848 y(situations.)i(Others)d(ha)o(v)o
(e)h(found)g(that)g(caches)f(are)h(still)e(bene\002cial.)348
3038 y Fn(5)82 b(Results)348 3163 y Fm(No)o(w)12 b(we)h(look)g(at)g
(the)g(cumulati)o(v)o(e)e(ef)o(fects)h(for)g(shado)o(w)h(rays)g(of)g
(the)g(three)f(main)h(optimizations)348 3231 y(described)k(in)g(the)h
(paper)m(.)28 b(First)16 b(we)h(speed)h(up)g(bounding)f(box)h(tests.)27
b(Ne)o(xt)17 b(we)g(speed)h(up)g(the)348 3298 y(tra)o(v)o(ersal)i
(using)i(the)f(dif)o(ferent)f(methods)h(from)g(Section)g(4.3.)40
b(W)l(e)21 b(then)h(treat)e(shado)o(w)h(rays)348 3366
y(dif)o(ferently)f(from)i(intersection)e(rays)i(and)h(lastly)e(we)h
(add)g(a)g(shado)o(w)g(cache.)42 b(In)22 b(all)g(of)g(the)1303
3556 y(9)p eop
%%Page: 10 10
10 9 bop 348 300 1628 3 v 347 367 3 68 v 733 367 V 852
347 a Fm(1)p 913 367 V 124 w(2)p 1064 367 V 123 w(3)p
1216 367 V 124 w(4)p 1368 367 V 124 w(5)p 1519 367 V
123 w(6)p 1671 367 V 124 w(7)p 1823 367 V 124 w(8)p 1974
367 V 348 370 1628 3 v 347 437 3 68 v 382 417 a(theater)p
733 437 V 288 w(64)p 913 437 V 96 w(36)p 1064 437 V 95
w(30)p 1216 437 V 96 w(21)p 1368 437 V 96 w(22)p 1519
437 V 95 w(11)p 1671 437 V 96 w(10)p 1823 437 V 124 w(6)p
1974 437 V 347 504 V 382 484 a(lab)p 733 504 V 373 w(79)p
913 504 V 96 w(41)p 1064 504 V 95 w(32)p 1216 504 V 96
w(22)p 1368 504 V 96 w(20)p 1519 504 V 95 w(12)p 1671
504 V 96 w(12)p 1823 504 V 124 w(7)p 1974 504 V 347 572
V 382 552 a(10,000)15 b(small)p 733 572 V 122 w(415)p
913 572 V 68 w(223)p 1064 572 V 67 w(191)p 1216 572 V
68 w(142)p 1368 572 V 68 w(110)p 1519 572 V 95 w(48)p
1671 572 V 96 w(50)p 1823 572 V 96 w(27)p 1974 572 V
347 639 V 382 619 a(10,000)g(mid)p 733 639 V 157 w(392)p
913 639 V 68 w(185)p 1064 639 V 67 w(154)p 1216 639 V
68 w(103)p 1368 639 V 96 w(81)p 1519 639 V 95 w(77)p
1671 639 V 96 w(79)p 1823 639 V 96 w(65)p 1974 639 V
347 707 V 382 686 a(10,000)g(big)p 733 707 V 173 w(381)p
913 707 V 68 w(179)p 1064 707 V 67 w(152)p 1216 707 V
68 w(104)p 1368 707 V 96 w(82)p 1519 707 V 95 w(79)p
1671 707 V 96 w(77)p 1823 707 V 96 w(69)p 1974 707 V
347 774 V 382 754 a(100,000)g(small)p 733 774 V 94 w(995)p
913 774 V 68 w(620)p 1064 774 V 67 w(550)p 1216 774 V
68 w(449)p 1368 774 V 68 w(351)p 1519 774 V 95 w(62)p
1671 774 V 96 w(63)p 1823 774 V 96 w(33)p 1974 774 V
347 842 V 382 821 a(100,000)g(mid)p 733 842 V 129 w(932)p
913 842 V 68 w(473)p 1064 842 V 67 w(424)p 1216 842 V
68 w(324)p 1368 842 V 68 w(230)p 1519 842 V 67 w(146)p
1671 842 V 68 w(148)p 1823 842 V 96 w(89)p 1974 842 V
347 909 V 382 889 a(100,000)g(big)p 733 909 V 117 w(1024)p
913 909 V 68 w(508)p 1064 909 V 67 w(442)p 1216 909 V
68 w(332)p 1368 909 V 68 w(240)p 1519 909 V 67 w(210)p
1671 909 V 68 w(212)p 1823 909 V 68 w(156)p 1974 909
V 347 976 V 382 956 a(300,000)g(mid)p 733 976 V 101 w(1093)p
913 976 V 68 w(597)p 1064 976 V 67 w(536)p 1216 976 V
68 w(421)p 1368 976 V 68 w(312)p 1519 976 V 67 w(120)p
1671 976 V 68 w(121)p 1823 976 V 96 w(64)p 1974 976 V
348 979 1628 3 v 348 1079 a(T)l(able)e(1:)k(Results)c(of)g(the)g(dif)o
(ferent)e(e)o(xperiments)h(described)h(in)g(the)g(te)o(xt)g(on)g(dif)o
(ferent)e(en)n(viron-)348 1146 y(ments.)17 b(T)n(imes)c(rounded)i(to)e
(the)h(nearest)f(second.)348 1315 y(e)o(xperiments)20
b(1,000,000)h(rays)f(are)g(generated)g(by)h(choosing)f(random)g(pairs)g
(of)g(points)g(from)348 1383 y(within)c(a)h(bounding)h(box)f(20\045)h
(lar)o(ger)e(than)h(the)g(bounding)g(box)h(of)f(the)g(en)n(vironment.)
26 b(In)17 b(the)348 1450 y(last)c(e)o(xperiment,)g(500,000)i(rays)e
(are)h(generated,)f(each)h(generated)f(ray)h(is)f(cast)g(twice,)g
(resulting)348 1518 y(in)h(1,000,000)h(rays)f(being)g(cast)f(o)o(v)o
(erall.)k(The)e(\002rst)e(tw)o(o)h(test)f(cases)h(are)g(real)f(en)n
(vironments,)g(the)348 1585 y(rest)e(are)f(composed)h(of)g(randomly)g
(oriented)f(and)h(positioned)g(unit)f(right)g(triangles.)15
b(The)d(number)348 1652 y(gi)o(v)o(es)k(the)f(number)h(of)f(triangles.)
22 b(Small,)15 b(mid,)h(and)g(big)f(refer)g(to)h(the)f(space)h(the)g
(triangles)e(\002ll.)348 1720 y(Small)f(en)n(vironments)g(are)g(20)h
(units)g(cubed,)g(mid)f(are)g(100)i(units)e(cubed,)h(and)g(big)g(are)f
(200)h(units)348 1787 y(cubed.)33 b(The)20 b(theater)e(model)g(has)h
(46502)h(polygons.)32 b(The)20 b(science)e(center)h(model)f(has)h(4045)
348 1855 y(polygons.)36 b(The)21 b(code)f(w)o(as)g(run)g(on)h(an)f(SGI)
g(O2)g(with)f(a)h(180)g(MHz)g(R5000)h(using)f(the)g(SGI)348
1922 y(compiler)12 b(with)f(full)h(optimization)f(turned)h(on)1273
1902 y Fb(1)1296 1922 y Fm(.)17 b(No)c(shading)f(or)h(other)f
(computation)g(w)o(as)g(done)348 1989 y(and)i(time)f(to)h(b)o(uild)g
(the)f(hierarchies)g(w)o(as)h(not)f(included.)433 2057
y(The)h(e)o(xperiments)f(reported)g(in)h(T)l(able)f(1)h(are)g(e)o
(xplained)g(in)f(more)h(detail)f(belo)o(w:)419 2169 y(1.)28
b(Bounding)c(box)f(test)g(computes)f(intersection)g(point,)j(tra)o(v)o
(ersal)d(uses)h(recursion,)h(and)489 2237 y(shado)o(w)13
b(rays)h(are)f(treated)g(as)h(intersection)e(rays.)419
2349 y(2.)28 b(Bounding)14 b(box)h(test)e(replaced)g(by)h(slab)g(v)o
(ersion)f(from)h(Section)f(4.1.)419 2461 y(3.)28 b(Recursi)o(v)o(e)16
b(tra)o(v)o(ersal)f(replaced)h(by)h(iterati)o(v)o(e)e(tra)o(v)o(ersal)g
(using)h(left)g(child,)h(right)e(sibling,)489 2529 y(and)f(parent)f
(pointers)g(as)h(in)g(Section)g(4.3.)419 2641 y(4.)28
b(Skip)14 b(pointer)f(used)h(to)g(speed)g(up)g(tra)o(v)o(ersal)e(as)i
(in)g(Section)g(4.3.)419 2754 y(5.)28 b(T)n(ree)14 b(tra)o(v)o(ersal)e
(replaced)i(by)g(array)f(tra)o(v)o(ersal)g(as)h(in)f(Section)h(4.3.)419
2866 y(6.)28 b(Intersection)12 b(rays)i(replaced)f(by)h(shado)o(w)f
(rays)h(as)g(in)g(Section)f(4.2.)419 2978 y(7.)28 b(Shado)o(w)13
b(caching)h(used)g(as)g(in)g(Section)f(4.4.)419 3091
y(8.)28 b(Shado)o(w)16 b(caching)g(used,)h(b)o(ut)e(each)i(ray)f(check)
o(ed)g(twice)f(before)h(generating)g(a)g(ne)o(w)f(ray)l(.)489
3158 y(The)f(same)g(number)f(of)h(checks)g(were)f(performed.)p
348 3251 776 3 v 410 3289 a Fa(1)429 3305 y Fk(-Ofast=ip32)p
646 3305 14 3 v 19 w(5k)1289 3556 y Fm(10)p eop
%%Page: 11 11
11 10 bop 433 354 a Fm(The)19 b(\002rst)f(thing)g(to)h(notice)f(is)g
(that)g(real)g(models)g(require)g(much)h(less)f(w)o(ork)g(than)h
(random)348 421 y(polygons.)h(This)15 b(is)f(because)g(the)h(polygons)g
(are)f(distrib)o(uted)f(v)o(ery)i(une)o(v)o(enly)f(and)h(v)o(ary)f
(greatly)348 489 y(in)g(size.)j(The)e(theater)e(has)h(a)g(lot)g(more)f
(open)i(space)f(and)g(e)o(v)o(en)g(more)f(v)o(ariation)g(in)h(polygon)g
(size)348 556 y(than)20 b(the)g(lab,)h(resulting)e(in)g(man)o(y)h(ine)o
(xpensi)o(v)o(e)g(rays)f(and)h(a)g(f)o(aster)g(a)o(v)o(erage)f(time.)35
b(In)19 b(spite)348 624 y(of)e(this,)h(the)e(results)g(sho)o(w)h(v)o
(ery)g(similar)e(trends)i(for)f(all)h(models.)26 b(In)17
b(the)g(\002rst)f(5)i(e)o(xperiments)348 691 y(we)g(ha)o(v)o(en')o(t)g
(used)g(an)o(y)h(model-speci\002c)e(kno)o(wledge,)i(we)f(ha)o(v)o(e)g
(just)g(reduced)g(the)g(amount)g(of)348 758 y(w)o(ork)g(done.)28
b(Special)17 b(shado)o(w)g(rays)g(and)h(caching)f(are)g(more)g(model)g
(speci\002c.)28 b(Shado)o(w)17 b(rays)348 826 y(are)e(more)g(ef)o
(fecti)o(v)o(e)f(when)h(there)g(are)g(man)o(y)g(intersections)f(along)h
(the)g(ray)h(and)f(are)g(almost)g(the)348 893 y(same)d(when)g(there)f
(is)h(zero)g(or)g(one)g(intersection.)j(Shado)o(w)d(caching)g(is)f
(based)h(on)h(ray)f(coherence)348 961 y(and)i(the)g(lik)o(elihood)f(of)
h(ha)o(ving)g(an)g(intersection.)i(In)d(e)o(xperiment)g(7)h(there)g(is)
f(an)h(unrealistically)348 1028 y(lo)o(w)i(amount)g(of)g(coherence)g
(\(none\).)25 b(In)16 b(e)o(xperiment)g(8)g(we)g(guaranteed)g(that)g
(there)g(w)o(ould)g(be)348 1095 y(signi\002cant)d(coherence)h(by)g
(casting)g(each)g(ray)f(twice.)348 1285 y Fn(6)82 b(Conclusions)348
1410 y Fm(The)17 b(optimization)d(of)j(ray)f(casting)f(code)i(is)e(a)i
(double-edged)f(sw)o(ord.)24 b(W)n(ith)16 b(careful)f(pro\002ling)348
1477 y(it)i(can)h(result)e(in)i(signi\002cant)f(speedups.)28
b(It)17 b(can)g(also)h(lead)f(to)g(code)h(that)f(is)g(slo)o(wer)f(and)i
(more)348 1545 y(complicated.)k(The)16 b(optimizations)d(presented)j
(here)f(are)g(probably)h(f)o(airly)f(independent)g(of)h(the)348
1612 y(computer)i(architecture.)31 b(There)19 b(are)f(plenty)g(of)h
(signi\002cant)f(lo)o(wer)g(le)o(v)o(el)f(optimizations)g(that)348
1680 y(can)h(be)f(made)g(which)g(may)g(be)g(completely)f(dependent)i
(upon)f(the)g(speci\002c)g(platform.)26 b(If)17 b(you)348
1747 y(plan)h(on)g(porting)f(your)h(code)g(to)g(other)f(architectures,)
g(or)g(e)o(v)o(en)h(k)o(eeping)g(your)g(code)g(for)g(long)348
1815 y(enough)d(that)e(the)h(architecture)f(changes)h(under)g(you,)g
(these)g(sorts)f(of)h(optimizations)e(should)i(be)348
1882 y(made)g(with)f(care.)433 1949 y(Ev)o(entually)i(you)g(get)h(to)f
(a)g(point)g(where)g(further)f(optimization)g(mak)o(es)h(no)h
(signi\002cant)e(dif-)348 2017 y(ference.)23 b(At)16
b(this)f(point)h(you)g(ha)o(v)o(e)h(no)f(choice)g(b)o(ut)g(to)g(go)g
(back)g(and)h(try)e(to)h(create)f(better)g(trees)348
2084 y(requiring)e(fe)o(wer)g(primiti)o(v)o(e)e(and)k(bounding)f(box)g
(tests,)f(or)h(to)f(look)h(at)g(entirely)e(dif)o(ferent)g(accel-)348
2152 y(eration)i(strate)o(gies.)k(Ov)o(er)c(time,)g(the)g(biggest)g
(wins)g(come)g(from)g(better)g(algorithms,)f(not)i(better)348
2219 y(code)f(tuning.)433 2286 y(The)i(results)g(presented)f(here)i
(should)f(be)h(vie)o(wed)e(as)h(a)h(case)f(study)l(.)25
b(The)o(y)17 b(describe)f(some)348 2354 y(of)f(what)f(has)g(w)o(ork)o
(ed)h(for)f(me)h(on)f(the)h(types)f(of)g(models)g(I)h(use.)k(The)o(y)c
(may)f(not)h(be)g(appropriate)348 2421 y(for)f(the)g(types)f(of)h
(models)f(you)i(use.)348 2610 y Fn(7)82 b(Ackno)o(wledgments)348
2736 y Fm(Thanks)17 b(to)f(Peter)g(Shirle)o(y)l(,)g(Jim)g(Arv)o(o,)g
(and)g(Eric)g(Haines)f(for)h(man)o(y)g(long)g(discussions)f(on)i(ray)
348 2803 y(tracing.)29 b(Thanks)19 b(to)f(Peter)f(and)i(Eric)e(for)h
(encouraging)g(me)g(to)g(write)e(up)i(these)g(e)o(xperiences,)348
2871 y(and)c(to)f(both)g(of)g(them)g(and)h(Bill)e(Martin)h(for)g
(helpful)f(comments)h(on)g(the)g(paper)m(.)k(This)c(w)o(ork)h(w)o(as)
348 2938 y(partially)f(funded)h(by)g(Honda)g(and)g(NSF)g(grant)f(A)n
(CI-97-20192.)348 3127 y Fn(Refer)o(ences)376 3253 y
Fm([1])29 b(A)r Fk(R)r(NA)r(L)t(D)s(I)s Fm(,)i(B)r(.)r(,)e(P)r
Fk(R)r(I)r(O)r(L)s Fm(,)i(T)n(.)r(,)f Fk(A)r(N)r(D)e
Fm(B)r Fk(O)r(UA)n(T)s(O)s(U)s(C)s(H)s Fm(,)j(K)r(.)49
b(A)22 b(ne)o(w)g(space)g(subdi)o(vision)470 3320 y(method)17
b(for)g(ray)h(tracing)f(CSG)h(modelled)e(scenes.)32 b
Fg(The)18 b(V)l(isual)f(Computer)g(3)p Fm(,)i(2)f(\(Aug.)470
3388 y(1987\),)c(98\226108.)1289 3556 y(11)p eop
%%Page: 12 12
12 11 bop 376 354 a Fm([2])29 b(B)r Fk(E)r(N)r(T)s(L)t(E)s(Y)l
Fm(,)d(J)r(.)c(L)r(.)36 b Fg(Writing)17 b(Ef)o(\002cient)h(Pr)m(o)o(gr)
o(ams)p Fm(.)34 b(Prentice-Hall,)17 b(Engle)o(w)o(ood)h(Clif)o(fs,)470
421 y(NJ,)13 b(1982.)376 534 y([3])29 b(B)r Fk(E)r(N)r(T)s(L)t(E)s(Y)l
Fm(,)g(J)r(.)24 b(L)r(.)44 b Fg(Pr)m(o)o(gr)o(amming)21
b(P)l(earls)f(\(r)n(eprinted)f(with)i(corr)n(ections\))p
Fm(.)39 b(Addison-)470 601 y(W)l(esle)o(y)l(,)14 b(Reading,)g(MA,)f
(USA,)h(1989.)376 713 y([4])29 b(F)r Fk(U)r(J)r(I)s(M)r(O)r(T)r(O)t
Fm(,)f(A)r(.)r(,)e(T)m Fk(A)r(N)q(A)s(K)s(A)s Fm(,)j(T)n(.)r(,)e
Fk(A)r(N)r(D)f Fm(I)r Fk(W)m(A)m(T)n(A)s Fm(,)i(K)r(.)43
b(Arts:)28 b(Accelerated)19 b(ray-tracing)470 781 y(system.)g
Fg(IEEE)c(Computer)f(Gr)o(aphics)f(and)h(Applications)f
Fm(\(Apr)m(.)h(1986\),)g(16\22626.)376 893 y([5])29 b(G)r
Fk(L)r(A)r(S)r(S)s(N)s(E)s(R)s Fm(,)20 b(A)r(.)q(,)c(Ed.)k
Fg(An)15 b(Intr)m(oduction)e(to)h(Ray)g(T)m(r)o(acing)p
Fm(.)21 b(Academic)12 b(Press,)i(1989.)376 1006 y([6])29
b(G)r Fk(O)r(L)r(D)r(S)s(M)s(I)s(T)s(H)s Fm(,)21 b(J)r(.)r(,)e
Fk(A)r(N)r(D)h Fm(S)r Fk(A)r(L)r(M)s(O)s(N)s Fm(,)i(J)r(.)i(Automatic)
12 b(creation)i(of)g(object)g(hierarchies)f(for)470 1073
y(ray)h(tracing.)19 b Fg(IEEE)c(Computer)e(Gr)o(aphics)h(and)g
(Applications)f(7)p Fm(,)h(5)g(\(May)g(1987\),)g(14\22620.)376
1185 y([7])29 b(H)r Fk(A)r(I)r(N)r(E)s(S)s Fm(,)21 b(E)r(.)j(Ef)o
(\002cienc)o(y)14 b(impro)o(v)o(ements)f(for)g(hierarchy)g(tra)o(v)o
(ersal.)20 b(In)14 b Fg(Gr)o(aphics)g(Gems)470 1253 y(II)p
Fm(,)f(J.)h(Arv)o(o,)g(Ed.)g(Academic)f(Press,)h(San)g(Die)o(go,)g
(1991,)g(pp.)g(267\226273.)376 1365 y([8])29 b(K)r Fk(A)m(Y)-5
b Fm(,)30 b(T)n(.)25 b(L)r(.)r(,)j Fk(A)r(N)r(D)g Fm(K)r
Fk(A)r(J)r(I)r(Y)n(A)s Fm(,)i(J)r(.)25 b(T)n(.)47 b(Ray)22
b(tracing)e(comple)o(x)i(scenes.)43 b(In)22 b Fg(Computer)470
1433 y(Gr)o(aphics)h(\(SIGGRAPH)f('86)i(Pr)m(oceedings\))f
Fm(\(Aug.)g(1986\),)j(D.)d(C.)h(Ev)o(ans)g(and)g(R.)g(J.)470
1500 y(Athay)l(,)14 b(Eds.,)g(v)o(ol.)g(20,)g(pp.)g(269\226278.)376
1612 y([9])29 b(K)r Fk(N)r(U)r(T)r(H)t Fm(,)c(D)r(.)c(E)r(.)35
b Fg(Liter)o(ate)16 b(Pr)m(o)o(gr)o(amming)p Fm(.)33
b(CSLI)18 b(Lecture)f(Notes)g(Number)g(27.)h(Stan-)470
1680 y(ford)12 b(Uni)o(v)o(ersity)f(Center)i(for)f(the)h(Study)f(of)h
(Language)g(and)g(Information,)f(Stanford,)g(CA,)470
1747 y(USA,)h(1992.)348 1859 y([10])29 b(R)p Fk(U)r(B)r(I)r(N)t
Fm(,)22 b(S)r(.)d(M)r(.)r(,)h Fk(A)r(N)r(D)h Fm(W)r Fk(H)r(I)r(T)s(T)s
(E)s(D)s Fm(,)i(T)n(.)k(A)15 b(3-dimensional)f(representation)f(for)i
(f)o(ast)g(ren-)470 1927 y(dering)f(of)f(comple)o(x)h(scenes.)20
b Fg(Computer)14 b(Gr)o(aphics)f(14)p Fm(,)h(3)g(\(July)g(1980\),)g
(110\226116.)348 2039 y([11])29 b(W)q Fk(O)r(O)r Fm(,)h(A)r(.)47
b(F)o(ast)21 b(ray-box)g(intersection.)43 b(In)21 b Fg(Gr)o(aphics)g
(Gems)p Fm(,)h(A.)f(S.)h(Glassner)n(,)g(Ed.)470 2107
y(Academic)13 b(Press,)g(San)i(Die)o(go,)e(1990,)i(pp.)f(395\226396.)
1289 3556 y(12)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
